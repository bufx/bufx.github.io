<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>数据结构 - 技术分享主页</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="技术分享主页"><meta name="msapplication-TileImage" content="/img/common/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="技术分享主页"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="定义： 数据结构是指相互之间存在一种或多种特定关系的数据元素的集合  集合  数据结构中的元素之间除了“同属一个集合” 的相互关系外，别无其他关系；  线性结构  数据结构中的元素存在一对一的相互关系  树形结构  数据结构中的元素存在一对多的相互关系；  图形结构  数据结构中的元素存在多对多的相互关系。 常见的数据结构：数组、队列、栈、链表、树、图、堆、散列表"><meta property="og:type" content="blog"><meta property="og:title" content="数据结构"><meta property="og:url" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><meta property="og:site_name" content="技术分享主页"><meta property="og:description" content="定义： 数据结构是指相互之间存在一种或多种特定关系的数据元素的集合  集合  数据结构中的元素之间除了“同属一个集合” 的相互关系外，别无其他关系；  线性结构  数据结构中的元素存在一对一的相互关系  树形结构  数据结构中的元素存在一对多的相互关系；  图形结构  数据结构中的元素存在多对多的相互关系。 常见的数据结构：数组、队列、栈、链表、树、图、堆、散列表"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1PLczF.png"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/e4AYfW.png"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/khWcIi.png"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Xlh4o1.png"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/t6B3u8.png"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ZBJ1ou.png"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ccXdRX.png"><meta property="og:image" content="https://blog.bufx.com/img/article/YEXpop.png"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/mQKbFe.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/b6nQ8J.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/IIT4iu.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/vi3FfO.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/VO5p8k.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/HrNPmh.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/tooQTQ.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/vPApV2.jpg"><meta property="og:image" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/6QVWbP.jpg"><meta property="article:published_time" content="2020-08-29T11:09:57.000Z"><meta property="article:modified_time" content="2025-07-11T13:41:22.761Z"><meta property="article:author" content="bufx"><meta property="article:tag" content="数据结构"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1PLczF.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},"headline":"数据结构","image":["https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1PLczF.png","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/e4AYfW.png","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/khWcIi.png","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Xlh4o1.png","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/t6B3u8.png","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ZBJ1ou.png","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ccXdRX.png","https://blog.bufx.com/img/article/YEXpop.png","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/mQKbFe.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/b6nQ8J.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/IIT4iu.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/vi3FfO.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/VO5p8k.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/HrNPmh.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/tooQTQ.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/vPApV2.jpg","https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/6QVWbP.jpg"],"datePublished":"2020-08-29T11:09:57.000Z","dateModified":"2025-07-11T13:41:22.761Z","author":{"@type":"Person","name":"bufx"},"publisher":{"@type":"Organization","name":"技术分享主页","logo":{"@type":"ImageObject","url":"https://blog.bufx.com/img/common/favicon.ico"}},"description":"定义： 数据结构是指相互之间存在一种或多种特定关系的数据元素的集合  集合  数据结构中的元素之间除了“同属一个集合” 的相互关系外，别无其他关系；  线性结构  数据结构中的元素存在一对一的相互关系  树形结构  数据结构中的元素存在一对多的相互关系；  图形结构  数据结构中的元素存在多对多的相互关系。 常见的数据结构：数组、队列、栈、链表、树、图、堆、散列表"}</script><link rel="canonical" href="https://blog.bufx.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><link rel="icon" href="/img/common/favicon.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link data-pjax rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?3c3ec636275df73c9383cb68964ee62a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/common/favicon.ico" alt="技术分享主页" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-08-29T11:09:57.000Z" title="2020/8/29 19:09:57">2020-08-29</time>发表</span><span class="level-item"><time dateTime="2025-07-11T13:41:22.761Z" title="2025/7/11 21:41:22">2025-07-11</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></span><span class="level-item">27 分钟读完 (大约4069个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">数据结构</h1><div class="content"><p><strong>定义：</strong></p>
<p>数据结构是指相互之间存在一种或多种特定关系的数据元素的<strong>集合</strong></p>
<ul>
<li><strong>集合</strong></li>
</ul>
<p>数据结构中的元素之间除了“同属一个集合” 的相互关系外，别无其他关系；</p>
<ul>
<li><strong>线性结构</strong></li>
</ul>
<p>数据结构中的元素存在一对一的相互关系</p>
<ul>
<li><strong>树形结构</strong></li>
</ul>
<p>数据结构中的元素存在一对多的相互关系；</p>
<ul>
<li><strong>图形结构</strong></li>
</ul>
<p>数据结构中的元素存在多对多的相互关系。</p>
<p><code>常见的数据结构：数组、队列、栈、链表、树、图、堆、散列表</code></p>
<span id="more"></span>

<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><p>就是在内存中开辟一个连续的空间存放元素，就相当一群人站成一队，从第一个开始编号001,002….可以轻松的通过号码来找到对应的人，但是如果中间有一个人离队了（中间加了一个人），后面的人号码都要向前（向后）移动，如果队伍很长改的变得就越多，所以数组的特点就是：<code>元素类型是固定的、长度是固定的、通过角标查询，查询快，增删慢。</code></p>
<h1 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h1><p><code>线性结构，先进先出</code>，就跟一群人排队过水管，先进水管的人的人先出去，后进水管的人后出去</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1PLczF.png"></p>
<h1 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h1><p><code>线性结构，先进后出</code>，就跟手枪上子弹一样，先上的子弹会被后上的子弹压到下面，打枪的时候最后上的子弹会第一个打出来，这个就是大家常说的压栈，底层实现同样用的是LinkedList</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/e4AYfW.png"></p>
<h1 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h1><p><code>链表的类型有多种：单链表，双链表，有序链表</code></p>
<p>链表是一种物理存储单元上非连续、非顺序的存储结构，数据元素的逻辑顺序是通过链表中的指针链接次序实现的。链表由一系列结点（链表中每一个元素称为结点）组成，结点可以在运行时动态生成。</p>
<p>可以这样理解：</p>
<p>有一条街，小明住在街中一角，他有小红的地址，然后小红也是住在这条街，她有小花的地址，同样小花也有别人的地址。某天我想找小红玩，但是我不知道她住哪里，我可以问小明，就知道小红住在哪里了。那么小明小红小花这些人之间的关系就组成一个链表。</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/khWcIi.png"></p>
<p><strong>单链表：</strong></p>
<p>就是小明只是右手握着小红的地址，他只有小红一个人的地址</p>
<p><strong>双链表：</strong></p>
<p>就是小明左手握着小白的地址，右手握着小红的地址，他有两个人的地址</p>
<p><strong>循环链表：</strong></p>
<p>就是小明握有小红的地址，小红握有小花的地址，而小花又握有小明的地址，这样就形成了一个循环</p>
<p><strong>有序链表：</strong></p>
<p>以某个标准，给链表的元素排序，比如比较内容大小、比较哈希值等</p>
<p><strong>链表与数组比较：</strong></p>
<p>优点：链表不需要确定长度大小，也不需要连续的内存空间，</p>
<p>缺点：由于不是连续的空间，所以查找元素比较吃力；相比数组只存储元素，链表的元素还要存储其它元素的地址，内存开销相对增大。</p>
<h1 id="树"><a href="#树" class="headerlink" title="树"></a>树</h1><p><strong>什么是树</strong></p>
<p>树结构是一种包括节点(nodes)和边(edges)的拥有层级关系的一种结构</p>
<p><strong>树中的概念</strong></p>
<ul>
<li>根节点(root): 树的最上层的节点，任何非空的树都有一个节点</li>
<li>路径(path): 从起始节点到终止节点经历过的边</li>
<li>父亲(parent)：除了根节点，每个节点的上一层边连接的节点就是它的父亲(节点)</li>
<li>孩子(children): 每个节点由边指向的下一层节点</li>
<li>兄弟(siblings): 同一个父亲并且处在同一层的节点</li>
<li>叶子节点(leaf node)或终端节点: 没有孩子的节点成为叶子节点</li>
</ul>
<h2 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h2><p>每个父节点最多只有两个子节点的树称为二叉树</p>
<p>与二叉树相关的概念:<br><strong>节点深度(depth)</strong>, <strong>树的高度(height)</strong>, <strong>树的宽度(width)</strong>, <strong>树的 size</strong></p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Xlh4o1.png"></p>
<h2 id="满二叉树"><a href="#满二叉树" class="headerlink" title="满二叉树"></a>满二叉树</h2><p>除最后一层无任何子节点外，每一层上的所有结点都有两个子结点。也可以这样理解，除叶子结点外的所有结点均有两个子结点。节点数达到最大值，所有叶子结点必须在同一层上。</p>
<p>一棵深度为k且有2k-1（2的k次幂减1）个结点的二叉树称为满二叉树</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/t6B3u8.png"></p>
<h2 id="完全二叉树"><a href="#完全二叉树" class="headerlink" title="完全二叉树"></a>完全二叉树</h2><p>若设二叉树的深度为h，除第 h 层外，其它各层 (1～(h-1)层) 的结点数都达到最大个数，第h层所有的结点都连续集中在最左边，这就是完全二叉树。</p>
<p>深度为k的，有n个结点的二叉树，当且仅当其每一个结点都与深度为k的满二叉树中编号从1至n的结点一一对应时，称之为完全二叉树。</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ZBJ1ou.png"></p>
<h2 id="二叉排序树（BST）"><a href="#二叉排序树（BST）" class="headerlink" title="二叉排序树（BST）"></a>二叉排序树（BST）</h2><p>二叉排序树（Binary Sort Tree）定义：又称为是二叉查找树或二叉搜索树。二叉排序树或者是一棵空树，或者是具有下列性质的二叉树：</p>
<ol>
<li>若它的左子树不空，则左子树上所有结点的值均小于它的根结点的值；</li>
<li>若它的右子树不空，则右子树上所有结点的值均大于它的根结点的值；</li>
<li>它的左、右子树也分别为二叉排序树；</li>
<li>没有键值相等的节点。</li>
</ol>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ccXdRX.png"></p>
<h2 id="平衡二叉树"><a href="#平衡二叉树" class="headerlink" title="平衡二叉树"></a>平衡二叉树</h2><p>平衡二叉树（Balanced Binary Tree）又被称为AVL树。它或者是一棵空树，或者是具有下列性质的二叉树：</p>
<p><strong>它的左子树和右子树都是平衡二叉树，且左子树和右子树的深度之差的绝对值不超过1。（注：平衡二叉树应该是一棵二叉排序树）</strong></p>
<p><img src="/../img/article/YEXpop.png"></p>
<h2 id="红黑树"><a href="#红黑树" class="headerlink" title="红黑树"></a>红黑树</h2><p>红黑树，一种二叉查找树，但在每个结点上增加一个存储位表示结点的颜色，可以是Red或Black。通过对任何一条从根到叶子的简单路径上各个结点的颜色进行约束，红黑树确保没有一条路径会比其他路径长出2倍，因而是近似于平衡的。树中每个结点包含5个属性：color、key、left、right和p。如果一个结点没有子节点或父节点，则该结点相应的指针属性值为NIL，我们可以把这些NIL视为指向二叉搜索树的叶节点（外部结点）的指针，而把带关键字的结点视为树的内部结点。<br>一棵红黑树是满足下面性质的二叉搜索树：</p>
<ol>
<li>每个结点或是红色的，或是黑色的；</li>
<li>根结点是黑色的；</li>
<li>每个叶结点（叶结点即指树尾端NIL指针或NULL结点）是黑的；</li>
<li>如果一个结点是红色的，则它的两个子结点都是黑色的；</li>
<li>对每个结点，从该结点到其所有后代叶结点的简单路径上，均包含相同数目的黑色结点。</li>
</ol>
<p>红黑树虽然本质上是一棵二叉查找树，但它在二叉查找树的基础上增加了着色和相关的性质使得红黑树相对平衡，从而保证了红黑树的查找、插入、删除的时间复杂度最坏为O(log n)。</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/mQKbFe.jpg"></p>
<h2 id="B树"><a href="#B树" class="headerlink" title="B树"></a>B树</h2><p>B树也是一种用于查找的平衡树，但是它不是二叉树。</p>
<p>B树又称为B-树，是一种平衡的多路查找树。B-树的阶是所有结点的孩子结点树的最大值。一棵m阶B-树，或为空树，或为满足下列特性的m叉树：</p>
<p><strong>一个m阶的B树具有如下几个特征：</strong></p>
<ol>
<li>根结点至少有两个子女</li>
<li>子树(节点)的个数(k)：m&#x2F;2 &lt;&#x3D; k &lt;&#x3D; m</li>
<li>每个中间节点都包含k-1个元素(关键字或数据)和k个孩子，其中 m&#x2F;2 &lt;&#x3D; k &lt;&#x3D; m，所以 子树个数(k)&#x3D;元素个数+1</li>
<li>每一个叶子节点都包含k-1个元素，其中 m&#x2F;2 &lt;&#x3D; k &lt;&#x3D; m</li>
<li>所有的叶子结点都位于同一层。</li>
<li>每个节点中的元素从小到大排列，节点当中k-1个元素正好是k个孩子包含的元素的值域分划。</li>
</ol>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/b6nQ8J.jpg"></p>
<p>添加元素的逻辑：</p>
<ol>
<li>首先考虑要插入的子树是否已经超出了关键字数的限制</li>
<li>超出的话，如果要插入的位置是叶子节点，就只能拆一个关键字添加到要插入位置的父节点</li>
<li>如果非叶子节点，就得从其他子树拆子树给新插入的元素做孩子</li>
</ol>
<p>删除也是一样的，要考虑删除孩子后，父节点是否还满足子树 k 介于 M&#x2F;2 和 M 的条件，不满足就得从别的节点拆子树甚至修改相关子树结构来保持平衡。</p>
<blockquote>
<p>具体讲解见：<a target="_blank" rel="noopener" href="https://www.buubiu.com/2020/08/30/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E8%AF%B4B%E6%A0%91/">图说B树</a></p>
</blockquote>
<h2 id="B-树"><a href="#B-树" class="headerlink" title="B+树"></a>B+树</h2><p>了解了 B 树后再来了解下它的变形版：B+ 树，它比 B 树的查询性能更高。</p>
<p><strong>一棵 B+ 树需要满足以下条件：</strong></p>
<ol>
<li>节点的子树数和关键字数相同（B 树是关键字数比子树数少一）</li>
<li>节点的关键字表示的是子树中的最大数，在子树中同样含有这个数据</li>
<li>叶子节点包含了全部数据，同时符合左小右大的顺序</li>
</ol>
<p><strong>一个m阶的B+树具有如下几个特征：</strong></p>
<ol>
<li>有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。</li>
<li>所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。</li>
<li>所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。</li>
</ol>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/IIT4iu.jpg"></p>
<blockquote>
<p>具体讲解见：<a target="_blank" rel="noopener" href="https://www.buubiu.com/2020/08/31/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E8%AF%B4B+%E6%A0%91">图说B+树</a></p>
</blockquote>
<h2 id="B-树-1"><a href="#B-树-1" class="headerlink" title="B*树"></a>B*树</h2><p>是B+树的变体，在B+树的非根和非叶子结点再增加指向兄弟的指针；</p>
<p>B*树定义了非叶子结点关键字个数至少为(2&#x2F;3)*M，即块的最低使用率为2&#x2F;3(代替B+树的1&#x2F;2)。</p>
<p><strong>B树，B+树，B*树比较：</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>子树数范围(k)</th>
<th>关键字数范围(d)</th>
<th>子树数与关键字数关系</th>
</tr>
</thead>
<tbody><tr>
<td>6阶B树</td>
<td>[3,4,5,6]</td>
<td>[2,3,4,5]</td>
<td>关键字数&#x3D;子树数-1</td>
</tr>
<tr>
<td>6阶B+树</td>
<td>[3,4,5,6]</td>
<td>[3,4,5,6]</td>
<td>关键字数&#x3D;子树数</td>
</tr>
<tr>
<td>6阶B*树</td>
<td>[2,3,4,5,6]</td>
<td>[2,3,4,5,6]</td>
<td>关键字数&#x3D;子树数</td>
</tr>
<tr>
<td>m阶B树</td>
<td>m&#x2F;2 &lt;&#x3D; k &lt;&#x3D; m</td>
<td>(m&#x2F;2)-1 &lt;&#x3D; d &lt;&#x3D; (m-1)</td>
<td>d &#x3D; k-1</td>
</tr>
<tr>
<td>m阶B+树</td>
<td>m&#x2F;2 &lt;&#x3D; k &lt;&#x3D; m</td>
<td>m&#x2F;2 &lt;&#x3D; d &lt;&#x3D; m</td>
<td>d&#x3D;k</td>
</tr>
<tr>
<td>m阶B*树</td>
<td>m*2&#x2F;3 &lt;&#x3D; k &lt;&#x3D; m</td>
<td>m*2&#x2F;3 &lt;&#x3D; k &lt;&#x3D; m</td>
<td>d&#x3D;k</td>
</tr>
</tbody></table>
<h2 id="LSM-树"><a href="#LSM-树" class="headerlink" title="LSM 树"></a>LSM 树</h2><h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>与普通B树相比，B+树的非叶子节点只有索引，所有数据都位于叶子节点，并且叶子节点上的数据会形成有序链表。B+树的主要优点如下：</p>
<ul>
<li>结构比较扁平，高度低（一般不超过4层），随机寻道次数少；</li>
<li>数据存储密度大，且都位于叶子节点，查询稳定，遍历方便；</li>
<li>叶子节点形成有序链表，范围查询转化为顺序读，效率高。相对而言B树必须通过中序遍历才能支持范围查询。</li>
</ul>
<p>当然，B+树也不是十全十美的，它的主要缺点有两个：</p>
<ul>
<li>如果写入的数据比较离散，那么寻找写入位置时，子节点有很大可能性不会在内存中，最终会产生大量的随机写，性能下降。下图来自[TokuDB的PPT]，说明了这一点。</li>
</ul>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/vi3FfO.jpg"></p>
<ul>
<li>如果B+树已经运行了很长时间，写入了很多数据，随着叶子节点分裂，其对应的块会不再顺序存储，而变得分散。这时执行范围查询也会变成随机读，效率降低了。</li>
</ul>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/VO5p8k.jpg"></p>
<p>可见，B+树在多读少写（相对而言）的情境下比较有优势，在多写少读的情境下就不是很有威力了。当然，我们可以用SSD来获得成倍提升的读写速率，但成本同样高昂，对海量存储集群而言不太可行。日志结构合并树（LSM Tree）就是作为B+树的替代方案产生的。</p>
<h3 id="认识LSM树"><a href="#认识LSM树" class="headerlink" title="认识LSM树"></a>认识LSM树</h3><p>LSM树由Patrick O’Neil等人在论文[《The Log-Structured Merge Tree》]中提出，它实际上不是一棵树，而是2个或者多个树或类似树的结构（注意这点）的集合。下图示出最简单的有2个结构的LSM树。</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/HrNPmh.jpg"></p>
<p>在LSM树中，最低一级也是最小的C0树位于内存里，而更高级的C1、C2…树都位于磁盘里。数据会先写入内存中的C0树，当它的大小达到一定阈值之后，C0树中的全部或部分数据就会刷入磁盘中的C1树，如下图所示。</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/tooQTQ.jpg"></p>
<p>由于内存的读写速率都比外存要快非常多，因此数据写入C0树的效率很高。并且数据从内存刷入磁盘时是预排序的，也就是说，LSM树将原本的随机写操作转化成了顺序写操作，写性能大幅提升。不过，它的tradeoff就是牺牲了一部分读性能，因为读取时需要将内存中的数据和磁盘中的数据合并。总体上来讲这种tradeoff还是值得的，因为：</p>
<ul>
<li>可以先读取内存中C0树的缓存数据。内存的效率很高，并且根据局部性原理，最近写入的数据命中率也高。</li>
<li>写入数据未刷到磁盘时不会占用磁盘的I&#x2F;O，不会与读取竞争。读取操作就能取得更长的磁盘时间，变相地弥补了读性能差距。</li>
</ul>
<p>在实际应用中，为了防止内存因断电等原因丢失数据，写入内存的数据同时会顺序在磁盘上写日志，类似于我们常见的预写日志（WAL），这就是LSM这个词中Log一词的来历。另外，如果有多级树的话，低级的树在达到大小阈值后也会在磁盘中进行合并，如下图所示。</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/vPApV2.jpg"></p>
<p><img src="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/6QVWbP.jpg"></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>数据结构</p><p><a href="https://blog.bufx.com/数据结构/">https://blog.bufx.com/数据结构/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>bufx</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-08-29</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-07-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE%E8%AF%B4B%E6%A0%91/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">数据结构-图说B树</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/SpringBoot%E4%B8%AD%E7%9A%84war%E5%8C%85%E9%83%A8%E7%BD%B2/"><span class="level-item">SpringBoot中的war包部署</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#数组"><span class="level-left"><span class="level-item">1</span><span class="level-item">数组</span></span></a></li><li><a class="level is-mobile" href="#队列"><span class="level-left"><span class="level-item">2</span><span class="level-item">队列</span></span></a></li><li><a class="level is-mobile" href="#栈"><span class="level-left"><span class="level-item">3</span><span class="level-item">栈</span></span></a></li><li><a class="level is-mobile" href="#链表"><span class="level-left"><span class="level-item">4</span><span class="level-item">链表</span></span></a></li><li><a class="level is-mobile" href="#树"><span class="level-left"><span class="level-item">5</span><span class="level-item">树</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#二叉树"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">二叉树</span></span></a></li><li><a class="level is-mobile" href="#满二叉树"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">满二叉树</span></span></a></li><li><a class="level is-mobile" href="#完全二叉树"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">完全二叉树</span></span></a></li><li><a class="level is-mobile" href="#二叉排序树（BST）"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">二叉排序树（BST）</span></span></a></li><li><a class="level is-mobile" href="#平衡二叉树"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">平衡二叉树</span></span></a></li><li><a class="level is-mobile" href="#红黑树"><span class="level-left"><span class="level-item">5.6</span><span class="level-item">红黑树</span></span></a></li><li><a class="level is-mobile" href="#B树"><span class="level-left"><span class="level-item">5.7</span><span class="level-item">B树</span></span></a></li><li><a class="level is-mobile" href="#B-树"><span class="level-left"><span class="level-item">5.8</span><span class="level-item">B+树</span></span></a></li><li><a class="level is-mobile" href="#B-树-1"><span class="level-left"><span class="level-item">5.9</span><span class="level-item">B*树</span></span></a></li><li><a class="level is-mobile" href="#LSM-树"><span class="level-left"><span class="level-item">5.10</span><span class="level-item">LSM 树</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#引言"><span class="level-left"><span class="level-item">5.10.1</span><span class="level-item">引言</span></span></a></li><li><a class="level is-mobile" href="#认识LSM树"><span class="level-left"><span class="level-item">5.10.2</span><span class="level-item">认识LSM树</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/common/favicon.ico" alt="技术分享主页" height="28"></a><p class="is-size-7"><span>&copy; 2025 bufx</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><span>  <img src="/img/common/foot-ga.png">  <a title="苏公网安备32059002006503号" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32059002006503" target="_blank" rel="noopener">苏公网安备32059002006503号</a></span><span>  <img src="/img/common/foot-icp.png">  <a title="苏ICP备2021016911号-2" href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">苏ICP备2021016911号-2</a></span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>