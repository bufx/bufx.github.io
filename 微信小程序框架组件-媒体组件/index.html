<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>微信小程序框架组件-媒体组件 - buubiu技术分享主页</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="buubiu技术分享主页"><meta name="msapplication-TileImage" content="/img/common/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="buubiu技术分享主页"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="audio音频组件 基础库 1.0.0 开始支持，低版本需做兼容处理。  音频。1.6.0版本开始，该组件不再维护。建议使用能力更强的 wx.createInnerAudioContext 接口"><meta property="og:type" content="blog"><meta property="og:title" content="微信小程序框架组件-媒体组件"><meta property="og:url" content="https://blog.buubiu.com/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6-%E5%AA%92%E4%BD%93%E7%BB%84%E4%BB%B6/"><meta property="og:site_name" content="buubiu技术分享主页"><meta property="og:description" content="audio音频组件 基础库 1.0.0 开始支持，低版本需做兼容处理。  音频。1.6.0版本开始，该组件不再维护。建议使用能力更强的 wx.createInnerAudioContext 接口"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.buubiu.com/img/article/5RhpVl1636697540762.png"><meta property="og:image" content="https://blog.buubiu.com/img/article/yU9J3C1636697967237.png"><meta property="og:image" content="https://blog.buubiu.com/img/article/DancCg1636698024229.jpg"><meta property="og:image" content="https://blog.buubiu.com/img/article/pBdhdZ1636698688951.png"><meta property="og:image" content="https://blog.buubiu.com/img/article/GgMUoK1636699073641.png"><meta property="og:image" content="https://blog.buubiu.com/img/article/whWwne1636699169721.png"><meta property="og:image" content="https://blog.buubiu.com/img/article/GxCm841636701175970.png"><meta property="article:published_time" content="2021-11-12T06:03:39.000Z"><meta property="article:modified_time" content="2024-01-25T15:08:05.932Z"><meta property="article:author" content="buubiu"><meta property="article:tag" content="微信小程序"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.buubiu.com/img/article/5RhpVl1636697540762.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.buubiu.com/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6-%E5%AA%92%E4%BD%93%E7%BB%84%E4%BB%B6/"},"headline":"微信小程序框架组件-媒体组件","image":["https://blog.buubiu.com/img/article/5RhpVl1636697540762.png","https://blog.buubiu.com/img/article/yU9J3C1636697967237.png","https://blog.buubiu.com/img/article/DancCg1636698024229.jpg","https://blog.buubiu.com/img/article/pBdhdZ1636698688951.png","https://blog.buubiu.com/img/article/GgMUoK1636699073641.png","https://blog.buubiu.com/img/article/whWwne1636699169721.png","https://blog.buubiu.com/img/article/GxCm841636701175970.png"],"datePublished":"2021-11-12T06:03:39.000Z","dateModified":"2024-01-25T15:08:05.932Z","author":{"@type":"Person","name":"buubiu"},"publisher":{"@type":"Organization","name":"buubiu技术分享主页","logo":{"@type":"ImageObject","url":"https://blog.buubiu.com/img/common/favicon.ico"}},"description":"audio音频组件 基础库 1.0.0 开始支持，低版本需做兼容处理。  音频。1.6.0版本开始，该组件不再维护。建议使用能力更强的 wx.createInnerAudioContext 接口"}</script><link rel="canonical" href="https://blog.buubiu.com/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6-%E5%AA%92%E4%BD%93%E7%BB%84%E4%BB%B6/"><link rel="icon" href="/img/common/favicon.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?3c3ec636275df73c9383cb68964ee62a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/common/favicon.ico" alt="buubiu技术分享主页" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-12T06:03:39.000Z" title="2021/11/12 14:03:39">2021-11-12</time>发表</span><span class="level-item"><time dateTime="2024-01-25T15:08:05.932Z" title="2024/1/25 23:08:05">2024-01-25</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%BE%AE%E4%BF%A1/">微信</a><span> / </span><a class="link-muted" href="/categories/%E5%BE%AE%E4%BF%A1/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></span><span class="level-item">1 小时读完 (大约10756个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">微信小程序框架组件-媒体组件</h1><div class="content"><h2 id="audio音频组件"><a href="#audio音频组件" class="headerlink" title="audio音频组件"></a>audio音频组件</h2><blockquote>
<p>基础库 1.0.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>音频。<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.6.0</a>版本开始，该组件不再维护。建议使用能力更强的 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/audio/wx.createInnerAudioContext.html">wx.createInnerAudioContext</a> 接口</p>
<span id="more"></span>

<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">id</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">audio 组件的唯一标识符</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">src</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">要播放音频的资源地址</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">loop</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否循环播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">controls</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否显示默认控件</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">poster</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">默认控件上的音频封面的图片资源地址，如果 controls 属性值为 false 则设置 poster 无效</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">name</td>
<td align="left">string</td>
<td align="left">未知音频</td>
<td align="left">否</td>
<td align="left">默认控件上的音频名字，如果 controls 属性值为 false 则设置 name 无效</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">author</td>
<td align="left">string</td>
<td align="left">未知作者</td>
<td align="left">否</td>
<td align="left">默认控件上的作者名字，如果 controls 属性值为 false 则设置 author 无效</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">binderror</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当发生错误时触发 error 事件，detail &#x3D; {errMsg:MediaError.code}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindplay</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当开始&#x2F;继续播放时触发play事件</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindpause</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当暂停播放时触发 pause 事件</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindtimeupdate</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当播放进度改变时触发 timeupdate 事件，detail &#x3D; {currentTime, duration}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindended</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当播放到末尾时触发 ended 事件</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
</tbody></table>
<h3 id="MediaError-code"><a href="#MediaError-code" class="headerlink" title="MediaError.code"></a>MediaError.code</h3><table>
<thead>
<tr>
<th align="left">返回错误码</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">获取资源被用户禁止</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">网络错误</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">解码错误</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">不合适资源</td>
</tr>
</tbody></table>
<h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/s/NycgqcmS6KYY">在开发者工具中预览效果</a></p>
<figure class="highlight html"><figcaption><span>index.wxml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page__hd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page__title&quot;</span>&gt;</span>audio<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page__desc&quot;</span>&gt;</span>音频<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page__bd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section section_gap&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;current.src&#125;&#125;&quot;</span> <span class="attr">poster</span>=<span class="string">&quot;&#123;&#123;current.poster&#125;&#125;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&#123;&#123;current.name&#125;&#125;&quot;</span> <span class="attr">author</span>=<span class="string">&quot;&#123;&#123;current.author&#125;&#125;&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&#123;&#123;audioAction&#125;&#125;&quot;</span> <span class="attr">bindplay</span>=<span class="string">&quot;audioPlayed&quot;</span> <span class="attr">bindtimeupdate</span>=<span class="string">&quot;audioTimeUpdated&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section section_gap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;section__title&quot;</span>&gt;</span>播放<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;body-view&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;playAudio&quot;</span>&gt;</span>播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section section_gap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;section__title&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;body-view&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;pauseAudio&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section section_gap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;section__title&quot;</span>&gt;</span>进度<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;body-view&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slider</span> <span class="attr">bindchange</span>=<span class="string">&quot;timeSliderChanged&quot;</span> <span class="attr">left-icon</span>=<span class="string">&quot;cancel&quot;</span> <span class="attr">right-icon</span>=<span class="string">&quot;success_no_circle&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section section_gap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;section__title&quot;</span>&gt;</span>播放速率<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;body-view&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slider</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">max</span>=<span class="string">&quot;4&quot;</span> <span class="attr">bindchange</span>=<span class="string">&quot;playbackRateSliderChanged&quot;</span> <span class="attr">left-icon</span>=<span class="string">&quot;cancel&quot;</span> <span class="attr">right-icon</span>=<span class="string">&quot;success_no_circle&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">current</span>: &#123;</span><br><span class="line">      <span class="attr">poster</span>: <span class="string">&#x27;http://y.gtimg.cn/music/photo_new/T002R300x300M000003rsKF44GyaSk.jpg?max_age=2592000&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;此时此刻&#x27;</span>,</span><br><span class="line">      <span class="attr">author</span>: <span class="string">&#x27;许巍&#x27;</span>,</span><br><span class="line">      <span class="attr">src</span>: <span class="string">&#x27;http://ws.stream.qqmusic.qq.com/M500001VfvsJ21xFqb.mp3?guid=ffffffff82def4af4b12b3cd9337d5e7&amp;uin=346897220&amp;vkey=6292F51E1E384E06DCBDC9AB7C49FD713D632D313AC4858BACB8DDD29067D3C601481D36E62053BF8DFEAF74C0A5CCFADD6471160CAF3E6A&amp;fromtag=46&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">audioAction</span>: &#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;pause&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">audioPlayed</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;audio is played&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">audioTimeUpdated</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">duration</span> = e.<span class="property">detail</span>.<span class="property">duration</span>;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">timeSliderChanged</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">duration</span>)</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> time = <span class="variable language_">this</span>.<span class="property">duration</span> * e.<span class="property">detail</span>.<span class="property">value</span> / <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">audioAction</span>: &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;setCurrentTime&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: time</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">playbackRateSliderChanged</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">audioAction</span>: &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;setPlaybackRate&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">playAudio</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">audioAction</span>: &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;play&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">pauseAudio</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">audioAction</span>: &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;pause&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/../img/article/5RhpVl1636697540762.png"></p>
<h2 id="camera-系统相机-组件"><a href="#camera-系统相机-组件" class="headerlink" title="camera 系统相机 组件"></a>camera 系统相机 组件</h2><blockquote>
<p>基础库 1.6.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>系统相机。扫码二维码功能，需升级微信客户端至6.7.3。需要<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/authorize.html">用户授权</a> <code>scope.camera</code>。 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a>起 initdone 事件返回 maxZoom，最大变焦范围，相关接口 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/camera/CameraContext.setZoom.html">CameraContext.setZoom</a>。</p>
<p>相关api：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/camera/wx.createCameraContext.html">wx.createCameraContext</a></p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">mode</td>
<td align="left">string</td>
<td align="left">normal</td>
<td align="left">否</td>
<td align="left">应用模式，只在初始化时有效，不能动态变更</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.1.0</a></td>
</tr>
<tr>
<td align="left">resolution</td>
<td align="left">string</td>
<td align="left">medium</td>
<td align="left">否</td>
<td align="left">分辨率，不支持动态修改</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">device-position</td>
<td align="left">string</td>
<td align="left">back</td>
<td align="left">否</td>
<td align="left">摄像头朝向</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">flash</td>
<td align="left">string</td>
<td align="left">auto</td>
<td align="left">否</td>
<td align="left">闪光灯，值为auto, on, off</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">frame-size</td>
<td align="left">string</td>
<td align="left">medium</td>
<td align="left">否</td>
<td align="left">指定期望的相机帧数据尺寸</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.7.0</a></td>
</tr>
<tr>
<td align="left">bindstop</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">摄像头在非正常终止时触发，如退出后台等情况</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">binderror</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">用户不允许使用摄像头时触发</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindinitdone</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">相机初始化完成时触发，<code>e.detail = &#123;maxZoom&#125;</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.7.0</a></td>
</tr>
<tr>
<td align="left">bindscancode</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">在扫码识别成功时触发，仅在 mode&#x3D;”scanCode” 时生效</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.1.0</a></td>
</tr>
</tbody></table>
<p><strong>mode 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">normal</td>
<td align="left">相机模式</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">scanCode</td>
<td align="left">扫码模式</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>resolution 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">low</td>
<td align="left">低</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">medium</td>
<td align="left">中</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">high</td>
<td align="left">高</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>device-position 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">front</td>
<td align="left">前置</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">back</td>
<td align="left">后置</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>flash 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">auto</td>
<td align="left">自动</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">on</td>
<td align="left">打开</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">off</td>
<td align="left">关闭</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">torch</td>
<td align="left">常亮</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.8.0</a></td>
</tr>
</tbody></table>
<p><strong>frame-size 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">small</td>
<td align="left">小尺寸帧数据</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">medium</td>
<td align="left">中尺寸帧数据</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">large</td>
<td align="left">大尺寸帧数据</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="Bug-amp-Tip"><a href="#Bug-amp-Tip" class="headerlink" title="Bug &amp; Tip"></a>Bug &amp; Tip</h3><ol>
<li><code>tip</code>: 同一页面只能插入一个 <code>camera</code> 组件</li>
<li><code>tip</code>:请注意<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6">原生组件使用限制</a></li>
<li><code>tip</code>:onCameraFrame 接口根据 frame-size 返回不同尺寸的原始帧数据，与 Camera 组件展示的图像不同，其实际像素值由系统决定</li>
</ol>
<h3 id="示例代码-1"><a href="#示例代码-1" class="headerlink" title="示例代码"></a>示例代码</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/s/VBZ3Jim26zYu">在开发者工具中预览效果</a></p>
<figure class="highlight xml"><figcaption><span>index.wxml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">camera</span> <span class="attr">device-position</span>=<span class="string">&quot;back&quot;</span> <span class="attr">flash</span>=<span class="string">&quot;off&quot;</span> <span class="attr">binderror</span>=<span class="string">&quot;error&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 300px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">camera</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;takePhoto&quot;</span>&gt;</span>拍照<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;startRecord&quot;</span>&gt;</span>开始录像<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;stopRecord&quot;</span>&gt;</span>结束录像<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;preview-tips&quot;</span>&gt;</span>预览<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;src&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;src&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;videoSrc&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;video&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;videoSrc&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span> = wx.<span class="title function_">createCameraContext</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">takePhoto</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">takePhoto</span>(&#123;</span><br><span class="line">      <span class="attr">quality</span>: <span class="string">&#x27;high&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">src</span>: res.<span class="property">tempImagePath</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">startRecord</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">startRecord</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;startRecord&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">stopRecord</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">stopRecord</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">src</span>: res.<span class="property">tempThumbPath</span>,</span><br><span class="line">          <span class="attr">videoSrc</span>: res.<span class="property">tempVideoPath</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">error</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>真机调试效果：</p>
<p><img src="/../img/article/yU9J3C1636697967237.png"></p>
<h2 id="image图片组件"><a href="#image图片组件" class="headerlink" title="image图片组件"></a>image图片组件</h2><blockquote>
<p>基础库 1.0.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>图片。支持 JPG、PNG、SVG、WEBP、GIF 等格式，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.3.0</a> 起支持云文件ID。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">src</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">图片资源地址</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">mode</td>
<td align="left">string</td>
<td align="left">scaleToFill</td>
<td align="left">否</td>
<td align="left">图片裁剪、缩放的模式</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">webp</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">默认不解析 webP 格式，只支持网络资源</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.9.0</a></td>
</tr>
<tr>
<td align="left">lazy-load</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">图片懒加载，在即将进入一定范围（上下三屏）时才开始加载</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.5.0</a></td>
</tr>
<tr>
<td align="left">show-menu-by-longpress</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">长按图片显示发送给朋友、收藏、保存图片、搜一搜、打开名片&#x2F;前往群聊&#x2F;打开小程序（若图片中包含对应二维码或小程序码）的菜单</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.7.0</a></td>
</tr>
<tr>
<td align="left">binderror</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当错误发生时触发，event.detail &#x3D; {errMsg}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindload</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当图片载入完毕时触发，event.detail &#x3D; {height, width}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
</tbody></table>
<p><strong>mode 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">scaleToFill</td>
<td align="left">缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">aspectFit</td>
<td align="left">缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">aspectFill</td>
<td align="left">缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">widthFix</td>
<td align="left">缩放模式，宽度不变，高度自动变化，保持原图宽高比不变</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">heightFix</td>
<td align="left">缩放模式，高度不变，宽度自动变化，保持原图宽高比不变</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.3</a></td>
</tr>
<tr>
<td align="left">top</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的顶部区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">bottom</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的底部区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">center</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的中间区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">left</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的左边区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">right</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的右边区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">top left</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的左上边区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">top right</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的右上边区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">bottom left</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的左下边区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">bottom right</td>
<td align="left">裁剪模式，不缩放图片，只显示图片的右下边区域</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="Bug-amp-Tip-1"><a href="#Bug-amp-Tip-1" class="headerlink" title="Bug &amp; Tip"></a>Bug &amp; Tip</h3><ol>
<li><code>tip</code>：image组件默认宽度320px、高度240px</li>
<li><code>tip</code>：image组件中二维码&#x2F;小程序码图片不支持长按识别。仅在wx.previewImage中支持长按识别</li>
</ol>
<h3 id="示例代码-2"><a href="#示例代码-2" class="headerlink" title="示例代码"></a>示例代码</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/s/3Kcaatmc7Z5s">在开发者工具中预览效果</a></p>
<h4 id="原图"><a href="#原图" class="headerlink" title="原图"></a>原图</h4><p><img src="/../img/article/DancCg1636698024229.jpg"></p>
<figure class="highlight xml"><figcaption><span>index.wxml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page__hd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page__title&quot;</span>&gt;</span>image<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page__desc&quot;</span>&gt;</span>图片<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page__bd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section section_gap&quot;</span> <span class="attr">wx:for-items</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section__title&quot;</span>&gt;</span>&#123;&#123;item.text&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;section__ctn&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 200px; background-color: #eeeeee;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;&#123;&#123;item.mode&#125;&#125;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;src&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">array</span>: [&#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;scaleToFill&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;scaleToFill：不保持纵横比缩放图片，使图片完全适应&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;aspectFit&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;aspectFit：保持纵横比缩放图片，使图片的长边能完全显示出来&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;aspectFill&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;aspectFill：保持纵横比缩放图片，只保证图片的短边能完全显示出来&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;top：不缩放图片，只显示图片的顶部区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;bottom&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;bottom：不缩放图片，只显示图片的底部区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;center：不缩放图片，只显示图片的中间区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;left：不缩放图片，只显示图片的左边区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;right：不缩放图片，只显示图片的右边边区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;top left&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;top left：不缩放图片，只显示图片的左上边区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;top right&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;top right：不缩放图片，只显示图片的右上边区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;bottom left&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;bottom left：不缩放图片，只显示图片的左下边区域&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;bottom right&#x27;</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;bottom right：不缩放图片，只显示图片的右下边区域&#x27;</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&#x27;../resources/cat.jpg&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">imageError</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;image3发生error事件，携带值为&#x27;</span>, e.<span class="property">detail</span>.<span class="property">errMsg</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/../img/article/pBdhdZ1636698688951.png"></p>
<h2 id="live-player-实时音视频播放-组件"><a href="#live-player-实时音视频播放-组件" class="headerlink" title="live-player 实时音视频播放 组件"></a>live-player 实时音视频播放 组件</h2><blockquote>
<p>基础库 1.7.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>实时音视频播放（v2.9.1 起支持<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E5%90%8C%E5%B1%82%E6%B8%B2%E6%9F%93">同层渲染</a>）。相关api：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/live/wx.createLivePlayerContext.html">wx.createLivePlayerContext</a></p>
<p>暂只针对国内主体如下类目的小程序开放，需要先通过类目审核，再在小程序管理后台，「开发」-「接口设置」中自助开通该组件权限。</p>
<table>
<thead>
<tr>
<th align="left">一级类目&#x2F;主体类型</th>
<th align="left">二级类目</th>
<th align="left">小程序内容场景</th>
</tr>
</thead>
<tbody><tr>
<td align="left">社交</td>
<td align="left">直播</td>
<td align="left">涉及娱乐性质，如明星直播、生活趣事直播、宠物直播等。选择该类目后首次提交代码审核，需经当地互联网主管机关审核确认，预计审核时长 7 天左右</td>
</tr>
<tr>
<td align="left">教育</td>
<td align="left">在线视频课程</td>
<td align="left">网课、在线培训、讲座等教育类直播</td>
</tr>
<tr>
<td align="left">医疗</td>
<td align="left">互联网医院，公立医疗机构，私立医疗机构</td>
<td align="left">问诊、大型健康讲座等直播</td>
</tr>
<tr>
<td align="left">金融</td>
<td align="left">银行、信托、公募基金、私募基金、证券&#x2F;期货、证券、期货投资咨询、保险、征信业务、新三板信息服务平台、股票信息服务平台（港股&#x2F;美股）、消费金融</td>
<td align="left">金融产品视频客服理赔、金融产品推广直播等</td>
</tr>
<tr>
<td align="left">汽车</td>
<td align="left">汽车预售服务</td>
<td align="left">汽车预售、推广直播</td>
</tr>
<tr>
<td align="left">政府主体帐号</td>
<td align="left">&#x2F;</td>
<td align="left">政府相关工作推广直播、领导讲话直播等</td>
</tr>
<tr>
<td align="left">工具</td>
<td align="left">视频客服</td>
<td align="left">不涉及以上几类内容的一对一视频客服服务，如企业售后一对一视频服务等</td>
</tr>
<tr>
<td align="left">IT科技</td>
<td align="left">多方通信；音视频设备</td>
<td align="left">为多方提供电话会议&#x2F;视频会议等服务；智能家居场景下控制摄像头</td>
</tr>
</tbody></table>
<blockquote>
<p>在小程序插件中使用需要基础库版本 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.3.0</a> 起。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">src</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">音视频地址。目前仅支持 <code>flv</code>, <code>rtmp</code> 格式</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">mode</td>
<td align="left">string</td>
<td align="left">live</td>
<td align="left">否</td>
<td align="left">模式</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">autoplay</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">自动播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">muted</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否静音</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">orientation</td>
<td align="left">string</td>
<td align="left">vertical</td>
<td align="left">否</td>
<td align="left">画面方向</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">object-fit</td>
<td align="left">string</td>
<td align="left">contain</td>
<td align="left">否</td>
<td align="left">填充模式，可选值有 <code>contain</code>，<code>fillCrop</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">background-mute</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">进入后台时是否静音（已废弃，默认退后台静音）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">min-cache</td>
<td align="left">number</td>
<td align="left">1</td>
<td align="left">否</td>
<td align="left">最小缓冲区，单位s（RTC 模式推荐 0.2s）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">max-cache</td>
<td align="left">number</td>
<td align="left">3</td>
<td align="left">否</td>
<td align="left">最大缓冲区，单位s（RTC 模式推荐 0.8s）。缓冲区用来抵抗网络波动，缓冲数据越多，网络抗性越好，但时延越大。</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">sound-mode</td>
<td align="left">string</td>
<td align="left">speaker</td>
<td align="left">否</td>
<td align="left">声音输出方式</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.90</a></td>
</tr>
<tr>
<td align="left">auto-pause-if-navigate</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">当跳转到本小程序的其他页面时，是否自动暂停本页面的实时音视频播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.5.0</a></td>
</tr>
<tr>
<td align="left">auto-pause-if-open-native</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">当跳转到其它微信原生页面时，是否自动暂停本页面的实时音视频播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.5.0</a></td>
</tr>
<tr>
<td align="left">picture-in-picture-mode</td>
<td align="left">string&#x2F;Array</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">设置小窗模式： push, pop，空字符串或通过数组形式设置多种模式（如： [“push”, “pop”]）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.3</a></td>
</tr>
<tr>
<td align="left">referrer-policy</td>
<td align="left">string</td>
<td align="left">no-referrer</td>
<td align="left">否</td>
<td align="left">格式固定为 <code>https://servicewechat.com/&#123;appid&#125;/&#123;version&#125;/page-frame.html</code>，其中 {appid} 为小程序的 appid，{version} 为小程序的版本号，版本号为 0 表示为开发版、体验版以及审核版本，版本号为 devtools 表示为开发者工具，其余为正式版本；</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.13.0</a></td>
</tr>
<tr>
<td align="left">bindstatechange</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">播放状态变化事件，detail &#x3D; {code}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">bindfullscreenchange</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">全屏变化事件，detail &#x3D; {direction, fullScreen}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">bindnetstatus</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">网络状态通知，detail &#x3D; {info}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.0</a></td>
</tr>
<tr>
<td align="left">bindaudiovolumenotify</td>
<td align="left">eventhandler</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">播放音量大小通知，detail &#x3D; {}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">bindenterpictureinpicture</td>
<td align="left">eventhandler</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">播放器进入小窗</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">bindleavepictureinpicture</td>
<td align="left">eventhandler</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">播放器退出小窗</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
</tbody></table>
<p><strong>mode 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">live</td>
<td align="left">直播</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">RTC</td>
<td align="left">实时通话，该模式时延更低</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>orientation 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">vertical</td>
<td align="left">竖直</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">horizontal</td>
<td align="left">水平</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>object-fit 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">contain</td>
<td align="left">图像长边填满屏幕，短边区域会被填充⿊⾊</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">fillCrop</td>
<td align="left">图像铺满屏幕，超出显示区域的部分将被截掉</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>sound-mode 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">speaker</td>
<td align="left">扬声器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">ear</td>
<td align="left">听筒</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>picture-in-picture-mode 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">[]</td>
<td align="left">取消小窗</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">push</td>
<td align="left">路由 push 时触发小窗</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pop</td>
<td align="left">路由 pop 时触发小窗</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>referrer-policy 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">origin</td>
<td align="left">发送完整的referrer</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">no-referrer</td>
<td align="left">不发送</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h3><table>
<thead>
<tr>
<th align="left">代码</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">2001</td>
<td align="left">已经连接服务器</td>
</tr>
<tr>
<td align="left">2002</td>
<td align="left">已经连接 RTMP 服务器,开始拉流</td>
</tr>
<tr>
<td align="left">2003</td>
<td align="left">网络接收到首个视频数据包(IDR)</td>
</tr>
<tr>
<td align="left">2004</td>
<td align="left">视频播放开始</td>
</tr>
<tr>
<td align="left">2005</td>
<td align="left">视频播放进度</td>
</tr>
<tr>
<td align="left">2006</td>
<td align="left">视频播放结束</td>
</tr>
<tr>
<td align="left">2007</td>
<td align="left">视频播放Loading</td>
</tr>
<tr>
<td align="left">2008</td>
<td align="left">解码器启动</td>
</tr>
<tr>
<td align="left">2009</td>
<td align="left">视频分辨率改变</td>
</tr>
<tr>
<td align="left">-2301</td>
<td align="left">网络断连，且经多次重连抢救无效，更多重试请自行重启播放</td>
</tr>
<tr>
<td align="left">-2302</td>
<td align="left">获取加速拉流地址失败</td>
</tr>
<tr>
<td align="left">2101</td>
<td align="left">当前视频帧解码失败</td>
</tr>
<tr>
<td align="left">2102</td>
<td align="left">当前音频帧解码失败</td>
</tr>
<tr>
<td align="left">2103</td>
<td align="left">网络断连, 已启动自动重连</td>
</tr>
<tr>
<td align="left">2104</td>
<td align="left">网络来包不稳：可能是下行带宽不足，或由于主播端出流不均匀</td>
</tr>
<tr>
<td align="left">2105</td>
<td align="left">当前视频播放出现卡顿</td>
</tr>
<tr>
<td align="left">2106</td>
<td align="left">硬解启动失败，采用软解</td>
</tr>
<tr>
<td align="left">2107</td>
<td align="left">当前视频帧不连续，可能丢帧</td>
</tr>
<tr>
<td align="left">2108</td>
<td align="left">当前流硬解第一个I帧失败，SDK自动切软解</td>
</tr>
<tr>
<td align="left">3001</td>
<td align="left">RTMP -DNS解析失败</td>
</tr>
<tr>
<td align="left">3002</td>
<td align="left">RTMP服务器连接失败</td>
</tr>
<tr>
<td align="left">3003</td>
<td align="left">RTMP服务器握手失败</td>
</tr>
<tr>
<td align="left">3005</td>
<td align="left">RTMP 读&#x2F;写失败，之后会发起网络重试</td>
</tr>
</tbody></table>
<h3 id="网络状态数据"><a href="#网络状态数据" class="headerlink" title="网络状态数据"></a>网络状态数据</h3><table>
<thead>
<tr>
<th align="left">键名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">videoBitrate</td>
<td align="left">当前视频编&#x2F;码器输出的比特率，单位 kbps</td>
</tr>
<tr>
<td align="left">audioBitrate</td>
<td align="left">当前音频编&#x2F;码器输出的比特率，单位 kbps</td>
</tr>
<tr>
<td align="left">videoFPS</td>
<td align="left">当前视频帧率</td>
</tr>
<tr>
<td align="left">videoGOP</td>
<td align="left">当前视频 GOP,也就是每两个关键帧(I帧)间隔时长，单位 s</td>
</tr>
<tr>
<td align="left">netSpeed</td>
<td align="left">当前的发送&#x2F;接收速度</td>
</tr>
<tr>
<td align="left">netJitter</td>
<td align="left">网络抖动情况，为 0 时表示没有任何抖动，值越大表明网络抖动越大，网络越不稳定</td>
</tr>
<tr>
<td align="left">netQualityLevel</td>
<td align="left">网络质量：0：未定义 1：最好 2：好 3：一般 4：差 5：很差 6：不可用</td>
</tr>
<tr>
<td align="left">videoWidth</td>
<td align="left">视频画面的宽度</td>
</tr>
<tr>
<td align="left">videoHeight</td>
<td align="left">视频画面的高度</td>
</tr>
<tr>
<td align="left">videoCache</td>
<td align="left">缓冲的视频总时长，单位毫秒</td>
</tr>
<tr>
<td align="left">audioCache</td>
<td align="left">缓冲的音频总时长，单位毫秒</td>
</tr>
<tr>
<td align="left">vDecCacheSize</td>
<td align="left">解码器中缓存的视频帧数 (Android 端硬解码时存在）</td>
</tr>
<tr>
<td align="left">vSumCacheSize</td>
<td align="left">缓冲的总视频帧数，该数值越大，播放延迟越高</td>
</tr>
<tr>
<td align="left">avPlayInterval</td>
<td align="left">音画同步错位时间（播放），单位 ms，此数值越小，音画同步越好</td>
</tr>
<tr>
<td align="left">avRecvInterval</td>
<td align="left">音画同步错位时间（网络），单位 ms，此数值越小，音画同步越好</td>
</tr>
<tr>
<td align="left">audioCacheThreshold</td>
<td align="left">音频缓冲时长阈值，缓冲超过该阈值后，播放器会开始调控延时</td>
</tr>
</tbody></table>
<h3 id="小窗特性说明"><a href="#小窗特性说明" class="headerlink" title="小窗特性说明"></a>小窗特性说明</h3><p>live-player 小窗支持以下三种触发模式（在组件上设置 picture-in-picture-mode 属性）：</p>
<ol>
<li>push 模式，即从当前页跳转至下一页时出现小窗（页面栈push）</li>
<li>pop 模式，即离开当前页面时触发（页面栈pop）</li>
<li>以上两种路由行为均触发小窗</li>
</ol>
<p>此外，小窗还支持以下特性：</p>
<ul>
<li>小窗容器尺寸会根据原组件尺寸自动判断</li>
<li>点击小窗，用户会被导航回小窗对应的播放器页面</li>
<li>小窗出现后，用户可点击小窗右上角的关闭按钮或调用 context.exitPictureInPicture() 接口关闭小窗</li>
</ul>
<p>当播放器进入小窗模式后，播放器所在页面处于 hide 状态(触发 onHide 生命周期)，该页面不会被销毁。当小窗被关闭时，播放器所在页面会被 unload (触发 onUnload 生命周期)。</p>
<h3 id="Bug-amp-Tip-2"><a href="#Bug-amp-Tip-2" class="headerlink" title="Bug &amp; Tip"></a>Bug &amp; Tip</h3><ol>
<li><code>tip</code>：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/live-player.html">live-player</a> 默认宽度300px、高度225px，可通过wxss设置宽高。</li>
<li><code>tip</code>：开发者工具上暂不支持。</li>
<li><code>tip</code>: 相关介绍和原理可参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/doc/000cccb57444107426c621b1756c09">此文章</a></li>
</ol>
<h3 id="示例代码-3"><a href="#示例代码-3" class="headerlink" title="示例代码"></a>示例代码</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/s/UzWEzmm763Y4">在开发者工具中预览效果</a></p>
<figure class="highlight xml"><figcaption><span>index.wxml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section tc&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">live-player</span> <span class="attr">id</span>=<span class="string">&quot;player&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://domain/pull_stream&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;RTC&quot;</span> <span class="attr">autoplay</span> <span class="attr">bindstatechange</span>=<span class="string">&quot;statechange&quot;</span> <span class="attr">binderror</span>=<span class="string">&quot;error&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindPlay&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindPause&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindStop&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>停止<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindResume&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>恢复<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindMute&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>静音<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span> = wx.<span class="title function_">createLivePlayerContext</span>(<span class="string">&#x27;player&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">statechange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;live-player code:&#x27;</span>, e.<span class="property">detail</span>.<span class="property">code</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">error</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;live-player error:&#x27;</span>, e.<span class="property">detail</span>.<span class="property">errMsg</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindPlay</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">play</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;play success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;play fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindPause</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">pause</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pause success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pause fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindStop</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">stop</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;stop success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;stop fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindResume</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">resume</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;resume success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;resume fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindMute</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">mute</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mute success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mute fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/../img/article/GgMUoK1636699073641.png"></p>
<h2 id="live-pusher-实时音视频录制-组件"><a href="#live-pusher-实时音视频录制-组件" class="headerlink" title="live-pusher 实时音视频录制 组件"></a>live-pusher 实时音视频录制 组件</h2><blockquote>
<p>基础库 1.7.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>实时音视频录制（v2.9.1 起支持<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E5%90%8C%E5%B1%82%E6%B8%B2%E6%9F%93">同层渲染</a>）。需要<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/authorize.html">用户授权</a> <code>scope.camera</code>、<code>scope.record</code>。</p>
<p>暂只针对国内主体如下类目的小程序开放，需要先通过类目审核，再在小程序管理后台，「开发」-「接口设置」中自助开通该组件权限。</p>
<table>
<thead>
<tr>
<th align="left">一级类目&#x2F;主体类型</th>
<th align="left">二级类目</th>
<th align="left">小程序内容场景</th>
</tr>
</thead>
<tbody><tr>
<td align="left">社交</td>
<td align="left">直播</td>
<td align="left">涉及娱乐性质，如明星直播、生活趣事直播、宠物直播等。选择该类目后首次提交代码审核，需经当地互联网主管机关审核确认，预计审核时长7天左右</td>
</tr>
<tr>
<td align="left">教育</td>
<td align="left">在线视频课程</td>
<td align="left">网课、在线培训、讲座等教育类直播</td>
</tr>
<tr>
<td align="left">医疗</td>
<td align="left">互联网医院，公立医疗机构，私立医疗机构</td>
<td align="left">问诊、大型健康讲座等直播</td>
</tr>
<tr>
<td align="left">金融</td>
<td align="left">银行、信托、公募基金、私募基金、证券&#x2F;期货、证券、期货投资咨询、保险、征信业务、新三板信息服务平台、股票信息服务平台（港股&#x2F;美股）、消费金融</td>
<td align="left">金融产品视频客服理赔、金融产品推广直播等</td>
</tr>
<tr>
<td align="left">汽车</td>
<td align="left">汽车预售服务</td>
<td align="left">汽车预售、推广直播</td>
</tr>
<tr>
<td align="left">政府主体帐号</td>
<td align="left">&#x2F;</td>
<td align="left">政府相关工作推广直播、领导讲话直播等</td>
</tr>
<tr>
<td align="left">工具</td>
<td align="left">视频客服</td>
<td align="left">不涉及以上几类内容的一对一视频客服服务，如企业售后一对一视频服务等</td>
</tr>
<tr>
<td align="left">IT科技</td>
<td align="left">多方通信；音视频设备</td>
<td align="left">为多方提供电话会议&#x2F;视频会议等服务；智能家居场景下控制摄像头</td>
</tr>
</tbody></table>
<p>相关api：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/live/wx.createLivePusherContext.html">wx.createLivePusherContext</a></p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">url</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">推流地址。目前仅支持 <code>rtmp</code> 格式</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">mode</td>
<td align="left">string</td>
<td align="left">RTC</td>
<td align="left">否</td>
<td align="left"><code>SD</code>（标清）, <code>HD</code>（高清）, <code>FHD</code>（超清）, <code>RTC</code>（实时通话）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">autopush</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">自动推流</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">muted</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否静音。即将废弃，可用 <code>enable-mic</code> 替代</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">enable-camera</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">开启摄像头</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">auto-focus</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">自动聚集</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">orientation</td>
<td align="left">string</td>
<td align="left">vertical</td>
<td align="left">否</td>
<td align="left">画面方向</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">beauty</td>
<td align="left">number</td>
<td align="left">0</td>
<td align="left">否</td>
<td align="left">美颜，取值范围 0-9 ，0 表示关闭</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">whiteness</td>
<td align="left">number</td>
<td align="left">0</td>
<td align="left">否</td>
<td align="left">美白，取值范围 0-9 ，0 表示关闭</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">aspect</td>
<td align="left">string</td>
<td align="left">9:16</td>
<td align="left">否</td>
<td align="left">宽高比，可选值有 <code>3:4</code>, <code>9:16</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">min-bitrate</td>
<td align="left">number</td>
<td align="left">200</td>
<td align="left">否</td>
<td align="left">最小码率</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">max-bitrate</td>
<td align="left">number</td>
<td align="left">1000</td>
<td align="left">否</td>
<td align="left">最大码率</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">audio-quality</td>
<td align="left">string</td>
<td align="left">high</td>
<td align="left">否</td>
<td align="left">高音质(48KHz)或低音质(16KHz)，值为<code>high</code>, <code>low</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">waiting-image</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">进入后台时推流的等待画面</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">waiting-image-hash</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">等待画面资源的MD5值</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">zoom</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">调整焦距</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.1.0</a></td>
</tr>
<tr>
<td align="left">device-position</td>
<td align="left">string</td>
<td align="left">front</td>
<td align="left">否</td>
<td align="left">前置或后置，值为<code>front</code>, <code>back</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.3.0</a></td>
</tr>
<tr>
<td align="left">background-mute</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">进入后台时是否静音（已废弃，默认退后台静音）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">mirror</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">设置推流画面是否镜像，产生的效果在 live-player 反应到</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.7.0</a></td>
</tr>
<tr>
<td align="left">remote-mirror</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">同 mirror 属性，后续 mirror 将废弃</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">local-mirror</td>
<td align="left">string</td>
<td align="left">auto</td>
<td align="left">否</td>
<td align="left">控制本地预览画面是否镜像</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">audio-reverb-type</td>
<td align="left">number</td>
<td align="left">0</td>
<td align="left">否</td>
<td align="left">音频混响类型</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">enable-mic</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">开启或关闭麦克风</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">enable-agc</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否开启音频自动增益</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">enable-ans</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否开启音频噪声抑制</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">audio-volume-type</td>
<td align="left">string</td>
<td align="left">auto</td>
<td align="left">否</td>
<td align="left">音量类型</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">video-width</td>
<td align="left">number</td>
<td align="left">360</td>
<td align="left">否</td>
<td align="left">上推的视频流的分辨率宽度</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">video-height</td>
<td align="left">number</td>
<td align="left">640</td>
<td align="left">否</td>
<td align="left">上推的视频流的分辨率高度</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.0</a></td>
</tr>
<tr>
<td align="left">beauty-style</td>
<td align="left">string</td>
<td align="left">smooth</td>
<td align="left">否</td>
<td align="left">设置美颜类型</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.12.0</a></td>
</tr>
<tr>
<td align="left">filter</td>
<td align="left">string</td>
<td align="left">standard</td>
<td align="left">否</td>
<td align="left">设置色彩滤镜</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.12.0</a></td>
</tr>
<tr>
<td align="left">bindstatechange</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">状态变化事件，detail &#x3D; {code}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">bindnetstatus</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">网络状态通知，detail &#x3D; {info}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.0</a></td>
</tr>
<tr>
<td align="left">binderror</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">渲染错误事件，detail &#x3D; {errMsg, errCode}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.4</a></td>
</tr>
<tr>
<td align="left">bindbgmstart</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">背景音开始播放时触发</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">bindbgmprogress</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">背景音进度变化时触发，detail &#x3D; {progress, duration}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">bindbgmcomplete</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">背景音播放完成时触发</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">bindaudiovolumenotify</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">返回麦克风采集的音量大小</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.12.0</a></td>
</tr>
</tbody></table>
<p><strong>orientation 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">vertical</td>
<td align="left">竖直</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">horizontal</td>
<td align="left">水平</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>local-mirror 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">auto</td>
<td align="left">前置摄像头镜像，后置摄像头不镜像</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">enable</td>
<td align="left">前后置摄像头均镜像</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">disable</td>
<td align="left">前后置摄像头均不镜像</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>audio-reverb-type 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">关闭</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">KTV</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">小房间</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">大会堂</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">低沉</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">洪亮</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">金属声</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">磁性</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>audio-volume-type 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">auto</td>
<td align="left">自动</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">media</td>
<td align="left">媒体音量</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">voicecall</td>
<td align="left">通话音量</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>beauty-style 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">smooth</td>
<td align="left">光滑美颜</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">nature</td>
<td align="left">自然美颜</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>filter 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">standard</td>
<td align="left">标准</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pink</td>
<td align="left">粉嫩</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">nostalgia</td>
<td align="left">怀旧</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">blues</td>
<td align="left">蓝调</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">romantic</td>
<td align="left">浪漫</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">cool</td>
<td align="left">清凉</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">fresher</td>
<td align="left">清新</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">solor</td>
<td align="left">日系</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">aestheticism</td>
<td align="left">唯美</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">whitening</td>
<td align="left">美白</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">cerisered</td>
<td align="left">樱红</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="Bug-amp-Tip-3"><a href="#Bug-amp-Tip-3" class="headerlink" title="Bug &amp; Tip"></a>Bug &amp; Tip</h3><ol>
<li><code>tip</code>：开发者工具上暂不支持。</li>
<li><code>tip</code>：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/live-pusher.html">live-pusher</a> 默认宽度为100%、无默认高度，请通过wxss设置宽高。</li>
<li><code>tip</code>：<code>waiting-image</code> 属性在 2.3.0 起完整支持网络路径、临时文件和包内路径。</li>
<li><code>tip</code>：请注意<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6">原生组件使用限制</a>。</li>
<li><code>tip</code>: 相关介绍和原理可参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/doc/000cccb57444107426c621b1756c09">此文章</a></li>
</ol>
<h3 id="错误码（errCode）"><a href="#错误码（errCode）" class="headerlink" title="错误码（errCode）"></a>错误码（errCode）</h3><table>
<thead>
<tr>
<th align="left">代码</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">10001</td>
<td align="left">用户禁止使用摄像头</td>
</tr>
<tr>
<td align="left">10002</td>
<td align="left">用户禁止使用录音</td>
</tr>
<tr>
<td align="left">10003</td>
<td align="left">背景音资源（BGM）加载失败</td>
</tr>
<tr>
<td align="left">10004</td>
<td align="left">等待画面资源（waiting-image）加载失败</td>
</tr>
</tbody></table>
<h3 id="状态码（code）"><a href="#状态码（code）" class="headerlink" title="状态码（code）"></a>状态码（code）</h3><table>
<thead>
<tr>
<th align="left">代码</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1001</td>
<td align="left">已经连接推流服务器</td>
</tr>
<tr>
<td align="left">1002</td>
<td align="left">已经与服务器握手完毕,开始推流</td>
</tr>
<tr>
<td align="left">1003</td>
<td align="left">打开摄像头成功</td>
</tr>
<tr>
<td align="left">1004</td>
<td align="left">录屏启动成功</td>
</tr>
<tr>
<td align="left">1005</td>
<td align="left">推流动态调整分辨率</td>
</tr>
<tr>
<td align="left">1006</td>
<td align="left">推流动态调整码率</td>
</tr>
<tr>
<td align="left">1007</td>
<td align="left">首帧画面采集完成</td>
</tr>
<tr>
<td align="left">1008</td>
<td align="left">编码器启动</td>
</tr>
<tr>
<td align="left">-1301</td>
<td align="left">打开摄像头失败</td>
</tr>
<tr>
<td align="left">-1302</td>
<td align="left">打开麦克风失败</td>
</tr>
<tr>
<td align="left">-1303</td>
<td align="left">视频编码失败</td>
</tr>
<tr>
<td align="left">-1304</td>
<td align="left">音频编码失败</td>
</tr>
<tr>
<td align="left">-1305</td>
<td align="left">不支持的视频分辨率</td>
</tr>
<tr>
<td align="left">-1306</td>
<td align="left">不支持的音频采样率</td>
</tr>
<tr>
<td align="left">-1307</td>
<td align="left">网络断连，且经多次重连抢救无效，更多重试请自行重启推流</td>
</tr>
<tr>
<td align="left">-1308</td>
<td align="left">开始录屏失败，可能是被用户拒绝</td>
</tr>
<tr>
<td align="left">-1309</td>
<td align="left">录屏失败，不支持的Android系统版本，需要5.0以上的系统</td>
</tr>
<tr>
<td align="left">-1310</td>
<td align="left">录屏被其他应用打断了</td>
</tr>
<tr>
<td align="left">-1311</td>
<td align="left">Android Mic打开成功，但是录不到音频数据</td>
</tr>
<tr>
<td align="left">-1312</td>
<td align="left">录屏动态切横竖屏失败</td>
</tr>
<tr>
<td align="left">1101</td>
<td align="left">网络状况不佳：上行带宽太小，上传数据受阻</td>
</tr>
<tr>
<td align="left">1102</td>
<td align="left">网络断连, 已启动自动重连</td>
</tr>
<tr>
<td align="left">1103</td>
<td align="left">硬编码启动失败,采用软编码</td>
</tr>
<tr>
<td align="left">1104</td>
<td align="left">视频编码失败</td>
</tr>
<tr>
<td align="left">1105</td>
<td align="left">新美颜软编码启动失败，采用老的软编码</td>
</tr>
<tr>
<td align="left">1106</td>
<td align="left">新美颜软编码启动失败，采用老的软编码</td>
</tr>
<tr>
<td align="left">3001</td>
<td align="left">RTMP -DNS解析失败</td>
</tr>
<tr>
<td align="left">3002</td>
<td align="left">RTMP服务器连接失败</td>
</tr>
<tr>
<td align="left">3003</td>
<td align="left">RTMP服务器握手失败</td>
</tr>
<tr>
<td align="left">3004</td>
<td align="left">RTMP服务器主动断开，请检查推流地址的合法性或防盗链有效期</td>
</tr>
<tr>
<td align="left">3005</td>
<td align="left">RTMP 读&#x2F;写失败</td>
</tr>
</tbody></table>
<h3 id="网络状态数据（info）"><a href="#网络状态数据（info）" class="headerlink" title="网络状态数据（info）"></a>网络状态数据（info）</h3><table>
<thead>
<tr>
<th align="left">键名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">videoBitrate</td>
<td align="left">当前视频编&#x2F;码器输出的比特率，单位 kbps</td>
</tr>
<tr>
<td align="left">audioBitrate</td>
<td align="left">当前音频编&#x2F;码器输出的比特率，单位 kbps</td>
</tr>
<tr>
<td align="left">videoFPS</td>
<td align="left">当前视频帧率</td>
</tr>
<tr>
<td align="left">videoGOP</td>
<td align="left">当前视频 GOP,也就是每两个关键帧(I帧)间隔时长，单位 s</td>
</tr>
<tr>
<td align="left">netSpeed</td>
<td align="left">当前的发送&#x2F;接收速度</td>
</tr>
<tr>
<td align="left">netJitter</td>
<td align="left">网络抖动情况，抖动越大，网络越不稳定</td>
</tr>
<tr>
<td align="left">netQualityLevel</td>
<td align="left">网络质量：0：未定义 1：最好 2：好 3：一般 4：差 5：很差 6：不可用</td>
</tr>
<tr>
<td align="left">videoWidth</td>
<td align="left">视频画面的宽度</td>
</tr>
<tr>
<td align="left">videoHeight</td>
<td align="left">视频画面的高度</td>
</tr>
<tr>
<td align="left">videoCache</td>
<td align="left">主播端堆积的视频帧数</td>
</tr>
<tr>
<td align="left">audioCache</td>
<td align="left">主播端堆积的音频帧数</td>
</tr>
</tbody></table>
<h3 id="示例代码-4"><a href="#示例代码-4" class="headerlink" title="示例代码"></a>示例代码</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/s/KvWD9mmA62Yk">在开发者工具中预览效果</a></p>
<figure class="highlight xml"><figcaption><span>index.wxml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section tc&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">live-pusher</span> <span class="attr">id</span>=<span class="string">&quot;pusher&quot;</span> <span class="attr">url</span>=<span class="string">&quot;https://domain/push_stream&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;RTC&quot;</span> <span class="attr">autopush</span> <span class="attr">bindstatechange</span>=<span class="string">&quot;statechange&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindStart&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>播放推流<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindPause&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>暂停推流<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindStop&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>停止推流<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindResume&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>恢复推流<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindSwitchCamera&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>切换前后摄像头<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span> = wx.<span class="title function_">createLivePusherContext</span>(<span class="string">&#x27;pusher&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">statechange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;live-pusher code:&#x27;</span>, e.<span class="property">detail</span>.<span class="property">code</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindStart</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">start</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;start success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;start fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindPause</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">pause</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pause success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pause fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindStop</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">stop</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;stop success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;stop fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindResume</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">resume</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;resume success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;resume fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">bindSwitchCamera</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">switchCamera</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;switchCamera success&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;switchCamera fail&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/../img/article/whWwne1636699169721.png"></p>
<h2 id="video-视频-组件"><a href="#video-视频-组件" class="headerlink" title="video 视频 组件"></a>video 视频 组件</h2><blockquote>
<p>基础库 1.0.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>视频（v2.4.0 起支持<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E5%90%8C%E5%B1%82%E6%B8%B2%E6%9F%93">同层渲染</a>）。相关api：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/video/wx.createVideoContext.html">wx.createVideoContext</a></p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">src</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">是</td>
<td align="left">要播放视频的资源地址，支持网络路径、本地临时路径、云文件ID（<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.3.0</a>）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">duration</td>
<td align="left">number</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">指定视频时长</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.1.0</a></td>
</tr>
<tr>
<td align="left">controls</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">是否显示默认播放控件（播放&#x2F;暂停按钮、播放进度、时间）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">danmu-list</td>
<td align="left">Array.<object></td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">弹幕列表</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">danmu-btn</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否显示弹幕按钮，只在初始化时有效，不能动态变更</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">enable-danmu</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否展示弹幕，只在初始化时有效，不能动态变更</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">autoplay</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否自动播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">loop</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否循环播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.4.0</a></td>
</tr>
<tr>
<td align="left">muted</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否静音播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.4.0</a></td>
</tr>
<tr>
<td align="left">initial-time</td>
<td align="left">number</td>
<td align="left">0</td>
<td align="left">否</td>
<td align="left">指定视频初始播放位置</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.6.0</a></td>
</tr>
<tr>
<td align="left">page-gesture</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">在非全屏模式下，是否开启亮度与音量调节手势（废弃，见 vslide-gesture）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.6.0</a></td>
</tr>
<tr>
<td align="left">direction</td>
<td align="left">number</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">设置全屏时视频的方向，不指定则根据宽高比自动判断</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">show-progress</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">若不设置，宽度大于240时才会显示</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.0</a></td>
</tr>
<tr>
<td align="left">show-fullscreen-btn</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">是否显示全屏按钮</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.0</a></td>
</tr>
<tr>
<td align="left">show-play-btn</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">是否显示视频底部控制栏的播放按钮</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.0</a></td>
</tr>
<tr>
<td align="left">show-center-play-btn</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">是否显示视频中间的播放按钮</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.0</a></td>
</tr>
<tr>
<td align="left">enable-progress-gesture</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">是否开启控制进度的手势</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.9.0</a></td>
</tr>
<tr>
<td align="left">object-fit</td>
<td align="left">string</td>
<td align="left">contain</td>
<td align="left">否</td>
<td align="left">当视频大小与 video 容器大小不一致时，视频的表现形式</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">poster</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">视频封面的图片网络资源地址或云文件ID（<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.3.0</a>）。若 controls 属性值为 false 则设置 poster 无效</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">show-mute-btn</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否显示静音按钮</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">title</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">视频的标题，全屏时在顶部展示</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">play-btn-position</td>
<td align="left">string</td>
<td align="left">bottom</td>
<td align="left">否</td>
<td align="left">播放按钮的位置</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">enable-play-gesture</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否开启播放手势，即双击切换播放&#x2F;暂停</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">auto-pause-if-navigate</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">当跳转到本小程序的其他页面时，是否自动暂停本页面的视频播放</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.5.0</a></td>
</tr>
<tr>
<td align="left">auto-pause-if-open-native</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">当跳转到其它微信原生页面时，是否自动暂停本页面的视频</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.5.0</a></td>
</tr>
<tr>
<td align="left">vslide-gesture</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">在非全屏模式下，是否开启亮度与音量调节手势（同 page-gesture）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.6.2</a></td>
</tr>
<tr>
<td align="left">vslide-gesture-in-fullscreen</td>
<td align="left">boolean</td>
<td align="left">true</td>
<td align="left">否</td>
<td align="left">在全屏模式下，是否开启亮度与音量调节手势</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.6.2</a></td>
</tr>
<tr>
<td align="left">ad-unit-id</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">是</td>
<td align="left">视频前贴广告单元ID，更多详情可参考开放能力<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/ad/video-patch-ad.html">视频前贴广告</a></td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.8.1</a></td>
</tr>
<tr>
<td align="left">poster-for-crawler</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">是</td>
<td align="left">用于给搜索等场景作为视频封面展示，建议使用无播放 icon 的视频封面图，只支持网络地址</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">show-casting-button</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">显示投屏按钮。安卓在同层渲染下生效，支持 DLNA 协议；iOS 支持 AirPlay 和 DLNA 协议</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.10.2</a></td>
</tr>
<tr>
<td align="left">picture-in-picture-mode</td>
<td align="left">string&#x2F;Array</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">设置小窗模式： push, pop，空字符串或通过数组形式设置多种模式（如： [“push”, “pop”]）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">picture-in-picture-show-progress</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否在小窗模式下显示播放进度</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">enable-auto-rotation</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否开启手机横屏时自动全屏，当系统设置开启自动旋转时生效</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">show-screen-lock-button</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否显示锁屏按钮，仅在全屏时显示，锁屏后控制栏的操作</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">show-snapshot-button</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否显示截屏按钮，仅在全屏时显示</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.13.0</a></td>
</tr>
<tr>
<td align="left">show-background-playback-button</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否展示后台音频播放按钮</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.14.3</a></td>
</tr>
<tr>
<td align="left">background-poster</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">进入后台音频播放后的通知栏图标（Android 独有）</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.14.3</a></td>
</tr>
<tr>
<td align="left">referrer-policy</td>
<td align="left">string</td>
<td align="left">no-referrer</td>
<td align="left">否</td>
<td align="left">格式固定为 <code>https://servicewechat.com/&#123;appid&#125;/&#123;version&#125;/page-frame.html</code>，其中 {appid} 为小程序的 appid，{version} 为小程序的版本号，版本号为 0 表示为开发版、体验版以及审核版本，版本号为 devtools 表示为开发者工具，其余为正式版本；</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.13.0</a></td>
</tr>
<tr>
<td align="left">is-drm</td>
<td align="left">boolean</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">是否是 DRM 视频源</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.19.3</a></td>
</tr>
<tr>
<td align="left">provision-url</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">DRM 设备身份认证 url，仅 is-drm 为 true 时生效 (Android)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.19.3</a></td>
</tr>
<tr>
<td align="left">certificate-url</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">DRM 设备身份认证 url，仅 is-drm 为 true 时生效 (iOS)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.19.3</a></td>
</tr>
<tr>
<td align="left">license-url</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">DRM 获取加密信息 url，仅 is-drm 为 true 时生效</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.19.3</a></td>
</tr>
<tr>
<td align="left">bindplay</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当开始&#x2F;继续播放时触发play事件</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindpause</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当暂停播放时触发 pause 事件</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindended</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当播放到末尾时触发 ended 事件</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindtimeupdate</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">播放进度变化时触发，event.detail &#x3D; {currentTime, duration} 。触发频率 250ms 一次</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td>
</tr>
<tr>
<td align="left">bindfullscreenchange</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">视频进入和退出全屏时触发，event.detail &#x3D; {fullScreen, direction}，direction 有效值为 vertical 或 horizontal</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.4.0</a></td>
</tr>
<tr>
<td align="left">bindwaiting</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">视频出现缓冲时触发</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">binderror</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">视频播放出错时触发</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.0</a></td>
</tr>
<tr>
<td align="left">bindprogress</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">加载进度变化时触发，只支持一段加载。event.detail &#x3D; {buffered}，百分比</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a></td>
</tr>
<tr>
<td align="left">bindloadedmetadata</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">视频元数据加载完成时触发。event.detail &#x3D; {width, height, duration}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.7.0</a></td>
</tr>
<tr>
<td align="left">bindcontrolstoggle</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">切换 controls 显示隐藏时触发。event.detail &#x3D; {show}</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.9.5</a></td>
</tr>
<tr>
<td align="left">bindenterpictureinpicture</td>
<td align="left">eventhandler</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">播放器进入小窗</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">bindleavepictureinpicture</td>
<td align="left">eventhandler</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">播放器退出小窗</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">bindseekcomplete</td>
<td align="left">eventhandler</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">seek 完成时触发 (position iOS 单位 s, Android 单位 ms)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.12.0</a></td>
</tr>
</tbody></table>
<p><strong>direction 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">正常竖向</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">90</td>
<td align="left">屏幕逆时针90度</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-90</td>
<td align="left">屏幕顺时针90度</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>object-fit 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">contain</td>
<td align="left">包含</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">fill</td>
<td align="left">填充</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">cover</td>
<td align="left">覆盖</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>play-btn-position 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">bottom</td>
<td align="left">controls bar上</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">center</td>
<td align="left">视频中间</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>picture-in-picture-mode 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">[]</td>
<td align="left">取消小窗</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">push</td>
<td align="left">路由 push 时触发小窗</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">pop</td>
<td align="left">路由 pop 时触发小窗</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>referrer-policy 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">origin</td>
<td align="left">发送完整的referrer</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">no-referrer</td>
<td align="left">不发送</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="Bug-amp-Tip-4"><a href="#Bug-amp-Tip-4" class="headerlink" title="Bug &amp; Tip"></a>Bug &amp; Tip</h3><ol>
<li><code>tip</code>：&#96;<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/video.html">video</a> 默认宽度 300px、高度 225px，可通过 wxss 设置宽高。</li>
<li><code>tip</code>：从 2.4.0 起 video 支持同层渲染，更多请参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6">原生组件使用限制</a></li>
</ol>
<h3 id="支持的格式"><a href="#支持的格式" class="headerlink" title="支持的格式"></a>支持的格式</h3><table>
<thead>
<tr>
<th align="left">格式</th>
<th align="left">iOS</th>
<th align="left">Android</th>
</tr>
</thead>
<tbody><tr>
<td align="left">mp4</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">mov</td>
<td align="left">√</td>
<td align="left">x</td>
</tr>
<tr>
<td align="left">m4v</td>
<td align="left">√</td>
<td align="left">x</td>
</tr>
<tr>
<td align="left">3gp</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">avi</td>
<td align="left">√</td>
<td align="left">x</td>
</tr>
<tr>
<td align="left">m3u8</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">webm</td>
<td align="left">x</td>
<td align="left">√</td>
</tr>
</tbody></table>
<h3 id="支持的编码格式"><a href="#支持的编码格式" class="headerlink" title="支持的编码格式"></a>支持的编码格式</h3><table>
<thead>
<tr>
<th align="left">格式</th>
<th align="left">iOS</th>
<th align="left">Android</th>
</tr>
</thead>
<tbody><tr>
<td align="left">H.264</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">HEVC</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">MPEG-4</td>
<td align="left">√</td>
<td align="left">√</td>
</tr>
<tr>
<td align="left">VP9</td>
<td align="left">x</td>
<td align="left">√</td>
</tr>
</tbody></table>
<h3 id="小窗特性说明-1"><a href="#小窗特性说明-1" class="headerlink" title="小窗特性说明"></a>小窗特性说明</h3><p>video 小窗支持以下三种触发模式（在组件上设置 picture-in-picture-mode 属性）：</p>
<ol>
<li>push 模式，即从当前页跳转至下一页时出现小窗（页面栈push）</li>
<li>pop 模式，即离开当前页面时触发（页面栈pop）</li>
<li>以上两种路由行为均触发小窗</li>
</ol>
<p>此外，小窗还支持以下特性：</p>
<ul>
<li>小窗容器尺寸会根据原组件尺寸自动判断</li>
<li>点击小窗，用户会被导航回小窗对应的播放器页面</li>
<li>小窗出现后，用户可点击小窗右上角的关闭按钮或调用 context.exitPictureInPicture() 接口关闭小窗</li>
</ul>
<p>当播放器进入小窗模式后，播放器所在页面处于 hide 状态(触发 onHide 生命周期)，该页面不会被销毁。当小窗被关闭时，播放器所在页面会被 unload (触发 onUnload 生命周期)。</p>
<h3 id="示例代码-5"><a href="#示例代码-5" class="headerlink" title="示例代码"></a>示例代码</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/s/X5V6Xmmk6xYB">在开发者工具中预览效果</a></p>
<figure class="highlight html"><figcaption><span>index.wxml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section tc&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;myVideo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&amp;bizid=1023&amp;hy=SH&amp;fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400&quot;</span> <span class="attr">binderror</span>=<span class="string">&quot;videoErrorCallback&quot;</span> <span class="attr">danmu-list</span>=<span class="string">&quot;&#123;&#123;danmuList&#125;&#125;&quot;</span> <span class="attr">enable-danmu</span> <span class="attr">danmu-btn</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cells&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cell weui-cell_input&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cell__hd&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-label&quot;</span>&gt;</span>弹幕内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cell__bd&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">bindblur</span>=<span class="string">&quot;bindInputBlur&quot;</span> <span class="attr">class</span>=<span class="string">&quot;weui-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;在此处输入弹幕内容&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindSendDanmu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">formType</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>发送弹幕<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindPlay&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;bindPause&quot;</span> <span class="attr">class</span>=<span class="string">&quot;page-body-button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getRandomColor</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> rgb = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span> ; i &lt; <span class="number">3</span>; ++i)&#123;</span><br><span class="line">    <span class="keyword">let</span> color = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>).<span class="title function_">toString</span>(<span class="number">16</span>)</span><br><span class="line">    color = color.<span class="property">length</span> == <span class="number">1</span> ? <span class="string">&#x27;0&#x27;</span> + color : color</span><br><span class="line">    rgb.<span class="title function_">push</span>(color)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;#&#x27;</span> + rgb.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">videoContext</span> = wx.<span class="title function_">createVideoContext</span>(<span class="string">&#x27;myVideo&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">inputValue</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">src</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">danmuList</span>:</span><br><span class="line">      [&#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;第 1s 出现的弹幕&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#ff0000&#x27;</span>,</span><br><span class="line">        <span class="attr">time</span>: <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;第 3s 出现的弹幕&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#ff00ff&#x27;</span>,</span><br><span class="line">        <span class="attr">time</span>: <span class="number">3</span></span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="attr">bindInputBlur</span>: <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputValue</span> = e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bindSendDanmu</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">sendDanmu</span>(&#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">inputValue</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="title function_">getRandomColor</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bindPlay</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">play</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bindPause</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">pause</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">videoErrorCallback</span>: <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;视频错误信息:&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">errMsg</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/../img/article/GxCm841636701175970.png"></p>
<h2 id="voip-room-多人视频对话-组件"><a href="#voip-room-多人视频对话-组件" class="headerlink" title="voip-room 多人视频对话 组件"></a>voip-room 多人视频对话 组件</h2><blockquote>
<p>基础库 2.11.0 开始支持，低版本需做<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">兼容处理</a>。</p>
</blockquote>
<p>多人音视频对话。需<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/authorize.html">用户授权</a> <code>scope.camera</code>、<code>scope.record</code>。相关接口： <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/voip/wx.joinVoIPChat.html">wx.joinVoIPChat</a></p>
<p>暂只针对国内主体如下类目的小程序开放，需要先通过类目审核，再在小程序管理后台，「开发」-「接口设置」中自助开通该组件权限。</p>
<table>
<thead>
<tr>
<th align="left">一级类目&#x2F;主体类型</th>
<th align="left">二级类目</th>
<th align="left">小程序内容场景</th>
</tr>
</thead>
<tbody><tr>
<td align="left">教育</td>
<td align="left">在线视频课程</td>
<td align="left">网课、在线培训、讲座等教育类直播</td>
</tr>
<tr>
<td align="left">医疗</td>
<td align="left">互联网医院，公立医院</td>
<td align="left">问诊、大型健康讲座等直播</td>
</tr>
<tr>
<td align="left">医疗</td>
<td align="left">私立医疗机构</td>
<td align="left">&#x2F;</td>
</tr>
<tr>
<td align="left">金融</td>
<td align="left">银行、信托、基金、证券&#x2F;期货、证券、期货投资咨询、保险、征信业务、新三板信息服务平台、股票信息服务平台（港股&#x2F;美股）、消费金融</td>
<td align="left">金融产品视频客服理赔、金融产品推广直播等</td>
</tr>
<tr>
<td align="left">汽车</td>
<td align="left">汽车预售服务</td>
<td align="left">汽车预售、推广直播</td>
</tr>
<tr>
<td align="left">政府主体帐号</td>
<td align="left">&#x2F;</td>
<td align="left">政府相关工作推广直播、领导讲话直播等</td>
</tr>
<tr>
<td align="left">IT 科技</td>
<td align="left">多方通信</td>
<td align="left">在线会议</td>
</tr>
<tr>
<td align="left">IT 科技</td>
<td align="left">硬件设备</td>
<td align="left">智能硬件</td>
</tr>
</tbody></table>
<p>开通该组件权限后，开发者可在 <code>joinVoIPChat</code> 成功后，获取房间成员的 <code>openid</code>，传递给 <code>voip-room</code> 组件，以显示成员画面。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
<th align="left">最低版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">openid</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">是</td>
<td align="left">进入房间用户的 openid</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">mode</td>
<td align="left">string</td>
<td align="left">camera</td>
<td align="left">否</td>
<td align="left">对话窗口类型，自身传入 camera，其它用户传入 video</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">device-position</td>
<td align="left">string</td>
<td align="left">front</td>
<td align="left">否</td>
<td align="left">仅在 mode 为 camera 时有效，前置或后置，值为<code>front</code>, <code>back</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
<tr>
<td align="left">binderror</td>
<td align="left">eventhandle</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">创建对话窗口失败时触发</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.0</a></td>
</tr>
</tbody></table>
<h3 id="Bug-amp-Tip-5"><a href="#Bug-amp-Tip-5" class="headerlink" title="Bug &amp; Tip"></a>Bug &amp; Tip</h3><ol>
<li><code>tip</code>：开发者工具上暂不支持</li>
<li><code>tip</code>：请注意<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6">原生组件使用限制</a></li>
</ol>
<h3 id="示例代码-6"><a href="#示例代码-6" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;openIdList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">voip-room</span></span></span><br><span class="line"><span class="tag">    <span class="attr">openid</span>=<span class="string">&quot;&#123;&#123;item&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">mode</span>=<span class="string">&quot;&#123;&#123;selfOpenId === item ? &#x27;camera&#x27; : &#x27;video&#x27;&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">voip-room</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

</div><div class="article-licensing box"><div class="licensing-title"><p>微信小程序框架组件-媒体组件</p><p><a href="https://blog.buubiu.com/微信小程序框架组件-媒体组件/">https://blog.buubiu.com/微信小程序框架组件-媒体组件/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>buubiu</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-11-12</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-01-25</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6-%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">微信小程序框架组件-地图组件</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6-%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6/"><span class="level-item">微信小程序框架组件-导航组件</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#audio音频组件"><span class="level-left"><span class="level-item">1</span><span class="level-item">audio音频组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#MediaError-code"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">MediaError.code</span></span></a></li><li><a class="level is-mobile" href="#示例代码"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">示例代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#camera-系统相机-组件"><span class="level-left"><span class="level-item">2</span><span class="level-item">camera 系统相机 组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Bug-amp-Tip"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Bug &amp; Tip</span></span></a></li><li><a class="level is-mobile" href="#示例代码-1"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">示例代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#image图片组件"><span class="level-left"><span class="level-item">3</span><span class="level-item">image图片组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Bug-amp-Tip-1"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">Bug &amp; Tip</span></span></a></li><li><a class="level is-mobile" href="#示例代码-2"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">示例代码</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#原图"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">原图</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#live-player-实时音视频播放-组件"><span class="level-left"><span class="level-item">4</span><span class="level-item">live-player 实时音视频播放 组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#状态码"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">状态码</span></span></a></li><li><a class="level is-mobile" href="#网络状态数据"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">网络状态数据</span></span></a></li><li><a class="level is-mobile" href="#小窗特性说明"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">小窗特性说明</span></span></a></li><li><a class="level is-mobile" href="#Bug-amp-Tip-2"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">Bug &amp; Tip</span></span></a></li><li><a class="level is-mobile" href="#示例代码-3"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">示例代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#live-pusher-实时音视频录制-组件"><span class="level-left"><span class="level-item">5</span><span class="level-item">live-pusher 实时音视频录制 组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Bug-amp-Tip-3"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">Bug &amp; Tip</span></span></a></li><li><a class="level is-mobile" href="#错误码（errCode）"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">错误码（errCode）</span></span></a></li><li><a class="level is-mobile" href="#状态码（code）"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">状态码（code）</span></span></a></li><li><a class="level is-mobile" href="#网络状态数据（info）"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">网络状态数据（info）</span></span></a></li><li><a class="level is-mobile" href="#示例代码-4"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">示例代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#video-视频-组件"><span class="level-left"><span class="level-item">6</span><span class="level-item">video 视频 组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Bug-amp-Tip-4"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">Bug &amp; Tip</span></span></a></li><li><a class="level is-mobile" href="#支持的格式"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">支持的格式</span></span></a></li><li><a class="level is-mobile" href="#支持的编码格式"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">支持的编码格式</span></span></a></li><li><a class="level is-mobile" href="#小窗特性说明-1"><span class="level-left"><span class="level-item">6.4</span><span class="level-item">小窗特性说明</span></span></a></li><li><a class="level is-mobile" href="#示例代码-5"><span class="level-left"><span class="level-item">6.5</span><span class="level-item">示例代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#voip-room-多人视频对话-组件"><span class="level-left"><span class="level-item">7</span><span class="level-item">voip-room 多人视频对话 组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Bug-amp-Tip-5"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">Bug &amp; Tip</span></span></a></li><li><a class="level is-mobile" href="#示例代码-6"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">示例代码</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/common/favicon.ico" alt="buubiu技术分享主页" height="28"></a><p class="is-size-7"><span>&copy; 2024 buubiu</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><span>  <img src="/img/common/foot-ga.png">  <a title="苏公网安备 32032102000187号" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32032102000187" target="_blank" rel="noopener">苏公网安备 32032102000187号</a></span><span>  <img src="/img/common/foot-icp.png">  <a title="苏ICP备2021016911号-1" href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">苏ICP备2021016911号-1</a></span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>