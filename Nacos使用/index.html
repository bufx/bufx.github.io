<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Nacos使用 - 技术分享主页</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="技术分享主页"><meta name="msapplication-TileImage" content="/img/common/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="技术分享主页"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="什么是Nacos官方：https:&amp;#x2F;&amp;#x2F;nacos.io&amp;#x2F;zh-cn&amp;#x2F;index.html 英文缩写：Name Configurations 表示注册中心和配置中心  Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。"><meta property="og:type" content="blog"><meta property="og:title" content="Nacos使用"><meta property="og:url" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/"><meta property="og:site_name" content="技术分享主页"><meta property="og:description" content="什么是Nacos官方：https:&amp;#x2F;&amp;#x2F;nacos.io&amp;#x2F;zh-cn&amp;#x2F;index.html 英文缩写：Name Configurations 表示注册中心和配置中心  Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/iEUWf01606366299643.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/U3I81o1606366505639.png"><meta property="og:image" content="https://blog.bufx.com/img/article/4oysWd1606409814214.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/a7GzJ91606368102584.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/w0Kuzg1606369058885.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/OuRA9r1606455449615.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/p6Z9CA1606457044779.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/Tz295y1606457014867.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/pUGnTp1606496403001.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/GgjIXS1606496902848.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/DatvRi1606635570933.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/bM3UAq1606635838176.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/Vz72bE1606635924408.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/9PJx2y1606635997967.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/Lt5Fiw1606636177478.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/o6QUOO1606636321450.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/c8Y3a91606636348476.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/VPWyz41606636455500.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/wsi9ns1606636672867.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/y3pSFA1606636813123.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/YarhxN1606636859739.png"><meta property="og:image" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/yuqPRF1606636936222.png"><meta property="article:published_time" content="2020-11-26T04:49:19.000Z"><meta property="article:modified_time" content="2025-07-11T13:30:53.338Z"><meta property="article:author" content="bufx"><meta property="article:tag" content="微服务"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/iEUWf01606366299643.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/"},"headline":"Nacos使用","image":["https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/iEUWf01606366299643.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/U3I81o1606366505639.png","https://blog.bufx.com/img/article/4oysWd1606409814214.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/a7GzJ91606368102584.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/w0Kuzg1606369058885.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/OuRA9r1606455449615.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/p6Z9CA1606457044779.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/Tz295y1606457014867.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/pUGnTp1606496403001.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/GgjIXS1606496902848.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/DatvRi1606635570933.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/bM3UAq1606635838176.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/Vz72bE1606635924408.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/9PJx2y1606635997967.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/Lt5Fiw1606636177478.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/o6QUOO1606636321450.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/c8Y3a91606636348476.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/VPWyz41606636455500.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/wsi9ns1606636672867.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/y3pSFA1606636813123.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/YarhxN1606636859739.png","https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/yuqPRF1606636936222.png"],"datePublished":"2020-11-26T04:49:19.000Z","dateModified":"2025-07-11T13:30:53.338Z","author":{"@type":"Person","name":"bufx"},"publisher":{"@type":"Organization","name":"技术分享主页","logo":{"@type":"ImageObject","url":"https://blog.bufx.com/img/common/favicon.ico"}},"description":"什么是Nacos官方：https:&#x2F;&#x2F;nacos.io&#x2F;zh-cn&#x2F;index.html 英文缩写：Name Configurations 表示注册中心和配置中心  Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。"}</script><link rel="canonical" href="https://blog.bufx.com/Nacos%E4%BD%BF%E7%94%A8/"><link rel="icon" href="/img/common/favicon.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link data-pjax rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?3c3ec636275df73c9383cb68964ee62a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/common/favicon.ico" alt="技术分享主页" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-11-26T04:49:19.000Z" title="2020/11/26 12:49:19">2020-11-26</time>发表</span><span class="level-item"><time dateTime="2025-07-11T13:30:53.338Z" title="2025/7/11 21:30:53">2025-07-11</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/SpringCloud-Alibaba/">SpringCloud Alibaba</a></span><span class="level-item">19 分钟读完 (大约2881个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Nacos使用</h1><div class="content"><h2 id="什么是Nacos"><a href="#什么是Nacos" class="headerlink" title="什么是Nacos"></a>什么是Nacos</h2><p>官方：<a target="_blank" rel="noopener" href="https://nacos.io/zh-cn/index.html">https://nacos.io/zh-cn/index.html</a></p>
<p>英文缩写：Name Configurations 表示注册中心和配置中心</p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/iEUWf01606366299643.png"></p>
<p>Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。</p>
<span id="more"></span>

<p><strong>总结：</strong>Nacos就是微服务架构中服务注册中心以及统一配置中心,用来替换原来的(eureka,consul)以及config组件。</p>
<h2 id="安装Nacos"><a href="#安装Nacos" class="headerlink" title="安装Nacos"></a>安装Nacos</h2><h3 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h3><p>Nacos 依赖 <a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/">Java</a> 环境来运行。如果您是从代码开始构建并运行Nacos，还需要为此配置 <a target="_blank" rel="noopener" href="https://maven.apache.org/index.html">Maven</a>环境，请确保是在以下版本环境中安装使用:</p>
<ol>
<li>64 bit OS，支持 Linux&#x2F;Unix&#x2F;Mac&#x2F;Windows，推荐选用 Linux&#x2F;Unix&#x2F;Mac。</li>
<li>64 bit JDK 1.8+；<a target="_blank" rel="noopener" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">下载</a> &amp; <a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/">配置</a>。</li>
<li>Maven 3.2.x+；<a target="_blank" rel="noopener" href="https://maven.apache.org/download.cgi">下载</a> &amp; <a target="_blank" rel="noopener" href="https://maven.apache.org/settings.html">配置</a>。</li>
</ol>
<h3 id="下载Nacos（1-4-0）"><a href="#下载Nacos（1-4-0）" class="headerlink" title="下载Nacos（1.4.0）"></a>下载Nacos（1.4.0）</h3><p><a target="_blank" rel="noopener" href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/U3I81o1606366505639.png"></p>
<h3 id="解压缩安装包到指定位置"><a href="#解压缩安装包到指定位置" class="headerlink" title="解压缩安装包到指定位置"></a>解压缩安装包到指定位置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- bin  			启动nacos服务的脚本目录</span><br><span class="line">- conf 			nacos的配置文件目录</span><br><span class="line">- target 		nacos的启动依赖存放目录</span><br><span class="line">- data		  nacos启动成功后保存数据的目录(启动后生成)</span><br><span class="line">- logs			nacos的启动运行日志目录（启动后生成）</span><br></pre></td></tr></table></figure>

<h3 id="启动安装服务"><a href="#启动安装服务" class="headerlink" title="启动安装服务"></a>启动安装服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- linux/unix/mac启动</span><br><span class="line">	打开终端进入nacos的bin目录执行如下命令 </span><br><span class="line">	./startup.sh -m standalone</span><br><span class="line"></span><br><span class="line">- windows启动</span><br><span class="line">	在 cmd中 </span><br><span class="line">	执行 startup.cmd -m standalone 或者双击startup.cmd运行文件。</span><br></pre></td></tr></table></figure>

<p><img src="/../img/article/4oysWd1606409814214.png"></p>
<h3 id="访问nacos的web服务管理界面"><a href="#访问nacos的web服务管理界面" class="headerlink" title="访问nacos的web服务管理界面"></a>访问nacos的web服务管理界面</h3><p><a target="_blank" rel="noopener" href="http://localhost:8848/nacos/">http://localhost:8848/nacos/</a></p>
<p>用户名 和 密码都是nacos</p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/a7GzJ91606368102584.png"></p>
<h2 id="开发服务注册到Nacos"><a href="#开发服务注册到Nacos" class="headerlink" title="开发服务注册到Nacos"></a>开发服务注册到Nacos</h2><h3 id="创建项目并引入依赖"><a href="#创建项目并引入依赖" class="headerlink" title="创建项目并引入依赖"></a>创建项目并引入依赖</h3><p>分别创建服务消费者（users）和服务提供着（products）两个项目</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入nacos client 依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#指定当前服务端口</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">9099</span></span><br><span class="line"><span class="comment">#指定服务名称</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">users</span></span><br><span class="line"><span class="comment">#指定nacos服务地址</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.server-addr</span>=<span class="string">localhost:8848</span></span><br><span class="line"><span class="comment">#指定注册中心地址</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">$&#123;spring.cloud.nacos.server-addr&#125;</span></span><br><span class="line"><span class="comment">#暴露所有web端点(可不加)</span></span><br><span class="line"><span class="attr">management.endpoints.web.exposure.include</span>=<span class="string">*</span></span><br></pre></td></tr></table></figure>

<h3 id="入口类加入服务注册注解"><a href="#入口类加入服务注册注解" class="headerlink" title="入口类加入服务注册注解"></a>入口类加入服务注册注解</h3><p><code>注意：新版本之后这一步可以省略不写</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springcloudalibaba03Products9098Application</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		SpringApplication.run(Springcloudalibaba03Products9098Application.class, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="启动项目并查看nacos控制台"><a href="#启动项目并查看nacos控制台" class="headerlink" title="启动项目并查看nacos控制台"></a>启动项目并查看nacos控制台</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/w0Kuzg1606369058885.png"></p>
<h2 id="Nacos配合OpenFeign进行服务间调用"><a href="#Nacos配合OpenFeign进行服务间调用" class="headerlink" title="Nacos配合OpenFeign进行服务间调用"></a>Nacos配合OpenFeign进行服务间调用</h2><ul>
<li>在服务提供着开发个接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/product/find&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">find</span><span class="params">(<span class="meta">@RequestParam(&quot;id&quot;)</span> String id)</span> &#123;</span><br><span class="line">		Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">		log.info(<span class="string">&quot;进入傻姑娘片服务，当前接收的商品id为：[&#123;&#125;]&quot;</span>, id);</span><br><span class="line">		map.put(<span class="string">&quot;status&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">		map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;当前商品服务调用成功，查询商品id为：&quot;</span>+id+<span class="string">&quot;,当前处理服务的端口为：&quot;</span> + port);</span><br><span class="line">		<span class="keyword">return</span> map;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在服务消费者进行调用</li>
</ul>
<h3 id="通过restTemplate直接调用"><a href="#通过restTemplate直接调用" class="headerlink" title="通过restTemplate直接调用"></a>通过restTemplate直接调用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@GetMapping(&quot;/user/getProductInfo&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getProductInfo</span><span class="params">(String productId)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//第一种方式：通过restTemplate直接调用</span></span><br><span class="line">		<span class="type">RestTemplate</span> <span class="variable">restTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">		<span class="type">String</span> <span class="variable">forObject</span> <span class="operator">=</span> restTemplate</span><br><span class="line">			.getForObject(<span class="string">&quot;http://localhost:9098/product/find?id=&quot;</span> + productId, String.class);</span><br><span class="line"></span><br><span class="line">      log.info(<span class="string">&quot;返回的信息：[&#123;&#125;]&quot;</span>, forObject);</span><br><span class="line">      <span class="keyword">return</span> forObject;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DiscoveryClient-restTemplate-ribbon负载均衡客户端"><a href="#DiscoveryClient-restTemplate-ribbon负载均衡客户端" class="headerlink" title="DiscoveryClient (restTemplate + ribbon负载均衡客户端)"></a>DiscoveryClient (restTemplate + ribbon负载均衡客户端)</h3><p>自定义负载均衡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/user/getProductInfo&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getProductInfo</span><span class="params">(String productId)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//restTemplate + ribbon 负载均衡客户端 DiscoveryClient LoadBalancerClient LoadBalanced注解形式</span></span><br><span class="line">		<span class="comment">//第二种方式：DiscoveryClient获取到所有的服务器地址，然后再自定义负载均衡</span></span><br><span class="line">		List&lt;ServiceInstance&gt; productsServiceInstances = discoveryClient.getInstances(<span class="string">&quot;products&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span> (ServiceInstance productsServiceInstance: productsServiceInstances)&#123;</span><br><span class="line">			log.info(<span class="string">&quot;服务地址：[&#123;&#125;]&quot;</span>,productsServiceInstance.getUri());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		log.info(<span class="string">&quot;返回的信息：[&#123;&#125;]&quot;</span>, forObject);</span><br><span class="line">		<span class="keyword">return</span> forObject;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="LoadBalancerClient-restTemplate-ribbon负载均衡客户端"><a href="#LoadBalancerClient-restTemplate-ribbon负载均衡客户端" class="headerlink" title="LoadBalancerClient (restTemplate + ribbon负载均衡客户端)"></a>LoadBalancerClient (restTemplate + ribbon负载均衡客户端)</h3><p>自动负载均衡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> LoadBalancerClient loadBalancerClient;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/user/getProductInfo&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getProductInfo</span><span class="params">(String productId)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//restTemplate + ribbon 负载均衡客户端 DiscoveryClient LoadBalancerClient LoadBalanced注解形式</span></span><br><span class="line">		<span class="comment">//第三种方式：LoadBalancerClient 自动负载均衡</span></span><br><span class="line">		<span class="type">ServiceInstance</span> <span class="variable">productServiceInstance</span> <span class="operator">=</span> loadBalancerClient.choose(<span class="string">&quot;products&quot;</span>);</span><br><span class="line">		log.info(<span class="string">&quot;当前处理服务负载均衡客户端主机为：[&#123;&#125;]&quot;</span>,productServiceInstance.getUri());</span><br><span class="line">		<span class="type">String</span> <span class="variable">forObject</span> <span class="operator">=</span> restTemplate</span><br><span class="line">			.getForObject(productServiceInstance.getUri() + <span class="string">&quot;/product/find?id=&quot;</span> + productId,</span><br><span class="line">				String.class);</span><br><span class="line">		log.info(<span class="string">&quot;返回的信息：[&#123;&#125;]&quot;</span>, forObject);</span><br><span class="line">		<span class="keyword">return</span> forObject;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="LoadBalanced注解形式-restTemplate-ribbon负载均衡客户端"><a href="#LoadBalanced注解形式-restTemplate-ribbon负载均衡客户端" class="headerlink" title="LoadBalanced注解形式(restTemplate + ribbon负载均衡客户端)"></a>LoadBalanced注解形式(restTemplate + ribbon负载均衡客户端)</h3><ul>
<li>首先创建一个具有负载均衡的RestTemplate对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestTemplateConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="meta">@LoadBalanced</span> <span class="comment">//代表创建一个具有负载均衡的RestTemplate对象</span></span><br><span class="line">	<span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再去调用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">  </span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/user/getProductInfo&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getProductInfo</span><span class="params">(String productId)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//restTemplate + ribbon 负载均衡客户端 DiscoveryClient LoadBalancerClient LoadBalanced注解形式</span></span><br><span class="line">		<span class="comment">//第四种方式：LoadBalanced注解形式 (新增RestTemplateConfig 配置类）</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">forObject</span> <span class="operator">=</span> restTemplate</span><br><span class="line">			.getForObject(<span class="string">&quot;http://products/product/find?id=&quot;</span> + productId, String.class);</span><br><span class="line">    </span><br><span class="line">		log.info(<span class="string">&quot;返回的信息：[&#123;&#125;]&quot;</span>, forObject);</span><br><span class="line">		<span class="keyword">return</span> forObject;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="openfeign调用（底层用ribbon做负载均衡）–推荐"><a href="#openfeign调用（底层用ribbon做负载均衡）–推荐" class="headerlink" title="openfeign调用（底层用ribbon做负载均衡）–推荐"></a>openfeign调用（底层用ribbon做负载均衡）–<code>推荐</code></h3><ul>
<li>首先创建调用商品服务的feign接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 调用商品服务feign接口</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;products&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductClient</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/product/find&quot;)</span></span><br><span class="line">	Map&lt;String, Object&gt; <span class="title function_">find</span><span class="params">(<span class="meta">@RequestParam(&quot;id&quot;)</span> String id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>然后再去调用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> ProductClient productClient;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/user/getProductInfo&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getProductInfo</span><span class="params">(String productId)</span> &#123;</span><br><span class="line">    </span><br><span class="line">		<span class="comment">//第五种方式：openfeign调用（底层用ribbon做负载均衡）</span></span><br><span class="line">		Map&lt;String, Object&gt; map = productClient.find(productId);</span><br><span class="line"></span><br><span class="line">		log.info(<span class="string">&quot;返回的信息：[&#123;&#125;]&quot;</span>, map.toString());</span><br><span class="line">		<span class="keyword">return</span> map.toString();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Nacos作为配置中心使用"><a href="#Nacos作为配置中心使用" class="headerlink" title="Nacos作为配置中心使用"></a>Nacos作为配置中心使用</h2><h3 id="创建项目并引入依赖-1"><a href="#创建项目并引入依赖-1" class="headerlink" title="创建项目并引入依赖"></a>创建项目并引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入nacos client依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入nacos config 依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改配置文件-1"><a href="#修改配置文件-1" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>由于要去获取配置中心的配置文件，所有本地的配置文件要改名为：bootstrap.proterties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##连接nacos配置中心</span></span><br><span class="line"><span class="comment">#远程配置中心的地址</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.server-addr</span>=<span class="string">localhost:8848</span></span><br><span class="line"><span class="comment">#去指定nacos地址读取配置</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">$&#123;spring.cloud.nacos.server-addr&#125;</span></span><br><span class="line"><span class="comment">#读取配置的命名空间ID(如果是默认public，不要配置)</span></span><br><span class="line"><span class="comment">#spring.cloud.nacos.config.namespace=</span></span><br><span class="line"><span class="comment">#读取配置的分组(默认DEFAULT_GROUP)</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#spring.application.name 和 spring.profiles.active 和 spring.cloud.nacos.config.file-extension 一起组成了配置中心的文件名称:configclient-prod.properties</span></span><br><span class="line"><span class="comment">#配置应用名，也是配置中心的文件前缀</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">configclient</span></span><br><span class="line"><span class="comment">#配置配中心的环境 是文件名称的中缀</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">prod</span></span><br><span class="line"><span class="comment">#配置中心的文件后缀(默认properties)</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.file-extension</span>=<span class="string">properties</span></span><br></pre></td></tr></table></figure>

<h3 id="在nacos中创建配置"><a href="#在nacos中创建配置" class="headerlink" title="在nacos中创建配置"></a>在nacos中创建配置</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/OuRA9r1606455449615.png"></p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/p6Z9CA1606457044779.png"></p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/Tz295y1606457014867.png"></p>
<h3 id="编写控制器测试配置读取情况"><a href="#编写控制器测试配置读取情况" class="headerlink" title="编写控制器测试配置读取情况"></a>编写控制器测试配置读取情况</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value(&quot;$&#123;user.name&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">		log.info(<span class="string">&quot;当前获取配置中name为：[&#123;&#125;]&quot;</span>, name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;当前获取配置中name为：&quot;</span>+name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="启动项目测试配置读取"><a href="#启动项目测试配置读取" class="headerlink" title="启动项目测试配置读取"></a>启动项目测试配置读取</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/pUGnTp1606496403001.png"></p>
<h3 id="DataId"><a href="#DataId" class="headerlink" title="DataId"></a>DataId</h3><p>用来读取远程配置中心的中具体配置文件其完整格式如下:</p>
<p><code>$&#123;prefix&#125;-$&#123;spring.profile.active&#125;.$&#123;file-extension&#125; </code></p>
<ul>
<li><p>prefix 默认为 spring.application.name 的值，也可以通过配置项 spring.cloud.nacos.config.prefix来配置。</p>
</li>
<li><p>spring.profile.active 即为当前环境对应的 profile，详情可以参考 Spring Boot文档。 注意：当 spring.profile.active 为空时，对应的连接符 - 也将不存在，dataId 的拼接格式变成<code> $&#123;prefix&#125;.$&#123;file-extension&#125;</code></p>
</li>
<li><p>file-exetension 为配置内容的数据格式，可以通过配置项 spring.cloud.nacos.config.file-extension 来配置。目前只支持 properties 和 yaml 类型。</p>
</li>
</ul>
<h3 id="实现自动配置刷新"><a href="#实现自动配置刷新" class="headerlink" title="实现自动配置刷新"></a>实现自动配置刷新</h3><p>默认情况下nacos已经实现了自动配置刷新功能，如果需要刷新配置直接在控制器中加入<code>@RefreshScpoper</code>注解即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value(&quot;$&#123;user.name&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/test/test&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">		log.info(<span class="string">&quot;当前获取配置中name为：[&#123;&#125;]&quot;</span>, name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;当前获取配置中name为：&quot;</span>+name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再控制台修改配置，刷新页面发现值变了</p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/GgjIXS1606496902848.png"></p>
<h2 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h2><h3 id="命名空间介绍（namespace）"><a href="#命名空间介绍（namespace）" class="headerlink" title="命名空间介绍（namespace）"></a>命名空间介绍（namespace）</h3><p>官方：<a target="_blank" rel="noopener" href="https://github.com/alibaba/spring-cloud-alibaba/wiki/Nacos-config">https://github.com/alibaba/spring-cloud-alibaba/wiki/Nacos-config</a></p>
<p>namespace命名空间是nacos针对于企业级开发设计用来针对于不同环境的区分,比如在企业开发时有测试环境,生产环境,等其他环境,因此为了保证不同环境配置实现隔离,提出了namespace的概念,默认在nacos中存在一个public命名空间所有配置在没有指定命名空间时都在这个命名空间中获取配置,在实际开发时可以针对于不能环境创建不同的namespace空间。默认空间不能删除!</p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/DatvRi1606635570933.png"></p>
<h3 id="创建其他命名空间"><a href="#创建其他命名空间" class="headerlink" title="创建其他命名空间"></a>创建其他命名空间</h3><p>每个命名空间都有一个唯一id,这个id是读取配置时指定空间的唯一标识</p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/bM3UAq1606635838176.png"></p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/Vz72bE1606635924408.png"></p>
<h3 id="在配置列表查看命名空间"><a href="#在配置列表查看命名空间" class="headerlink" title="在配置列表查看命名空间"></a>在配置列表查看命名空间</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/9PJx2y1606635997967.png"></p>
<h3 id="在指定空间下创建配置文件"><a href="#在指定空间下创建配置文件" class="headerlink" title="在指定空间下创建配置文件"></a>在指定空间下创建配置文件</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/Lt5Fiw1606636177478.png"></p>
<h3 id="在项目中使用命名空间指定配置"><a href="#在项目中使用命名空间指定配置" class="headerlink" title="在项目中使用命名空间指定配置"></a>在项目中使用命名空间指定配置</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##连接nacos配置中心</span></span><br><span class="line"><span class="comment">#远程配置中心的地址</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.server-addr</span>=<span class="string">localhost:8848</span></span><br><span class="line"><span class="comment">#去指定nacos地址读取配置</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">$&#123;spring.cloud.nacos.server-addr&#125;</span></span><br><span class="line"><span class="comment">#读取配置的命名空间(如果是默认public，不要配置</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">e7a4564a-c135-4dfb-a77e-57b4a5c2c703</span></span><br><span class="line"><span class="comment">#读取配置的分组(默认DEFAULT_GROUP)</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#spring.application.name 和 spring.profiles.active 和 spring.cloud.nacos.config.file-extension 一起组成了配置中心的文件名称:configclient-prod.properties</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#配置应用名，也是配置中心的文件前缀</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">configclient</span></span><br><span class="line"><span class="comment">#配置配中心的环境 是文件名称的中缀</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">prod</span></span><br><span class="line"><span class="comment">#配置中心的文件后缀(默认properties)</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.file-extension</span>=<span class="string">properties</span></span><br></pre></td></tr></table></figure>

<p><img src="/Nacos%E4%BD%BF%E7%94%A8/o6QUOO1606636321450.png"></p>
<h3 id="启动项目测试配置"><a href="#启动项目测试配置" class="headerlink" title="启动项目测试配置"></a>启动项目测试配置</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/c8Y3a91606636348476.png"></p>
<h2 id="配置分组"><a href="#配置分组" class="headerlink" title="配置分组"></a>配置分组</h2><h3 id="分组介绍（GROUP）"><a href="#分组介绍（GROUP）" class="headerlink" title="分组介绍（GROUP）"></a>分组介绍（GROUP）</h3><p>配置分组是对配置集进行分组，通过一个有意义的字符串（如 Buy 或 Trade ）来表示，不同的配置分组下可以有相同的配置集（Data ID）。当您在 Nacos 上创建一个配置时，如果未填写配置分组的名称，则配置分组的名称默认采用 DEFAULT_GROUP 。配置分组的常见场景：可用于区分不同的项目或应用，例如：学生管理系统的配置集可以定义一个group为：STUDENT_GROUP。</p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/VPWyz41606636455500.png"></p>
<h3 id="创建分组"><a href="#创建分组" class="headerlink" title="创建分组"></a>创建分组</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/wsi9ns1606636672867.png"></p>
<p><img src="/Nacos%E4%BD%BF%E7%94%A8/y3pSFA1606636813123.png"></p>
<h3 id="项目读取指定分组的配置"><a href="#项目读取指定分组的配置" class="headerlink" title="项目读取指定分组的配置"></a>项目读取指定分组的配置</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##连接nacos配置中心</span></span><br><span class="line"><span class="comment">#远程配置中心的地址</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.server-addr</span>=<span class="string">localhost:8848</span></span><br><span class="line"><span class="comment">#去指定nacos地址读取配置</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">$&#123;spring.cloud.nacos.server-addr&#125;</span></span><br><span class="line"><span class="comment">#读取配置的命名空间(如果是默认public，不要配置</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">e7a4564a-c135-4dfb-a77e-57b4a5c2c703</span></span><br><span class="line"><span class="comment">#读取配置的分组(默认DEFAULT_GROUP)</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">BUUBIU</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#spring.application.name 和 spring.profiles.active 和 spring.cloud.nacos.config.file-extension 一起组成了配置中心的文件名称:configclient-prod.properties</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#配置应用名，也是配置中心的文件前缀</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">configclient</span></span><br><span class="line"><span class="comment">#配置配中心的环境 是文件名称的中缀</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">prod</span></span><br><span class="line"><span class="comment">#配置中心的文件后缀(默认properties)</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.file-extension</span>=<span class="string">properties</span></span><br></pre></td></tr></table></figure>

<p><img src="/Nacos%E4%BD%BF%E7%94%A8/YarhxN1606636859739.png"></p>
<h3 id="启动项目测试配置-1"><a href="#启动项目测试配置-1" class="headerlink" title="启动项目测试配置"></a>启动项目测试配置</h3><p><img src="/Nacos%E4%BD%BF%E7%94%A8/yuqPRF1606636936222.png"></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Nacos使用</p><p><a href="https://blog.bufx.com/Nacos使用/">https://blog.bufx.com/Nacos使用/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>bufx</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-11-26</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-07-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/%E7%B3%BB%E7%BB%9F%E6%8B%93%E6%89%91%E5%9B%BE%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84skywalking%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">系统拓扑图涉及到的skywalking接口说明</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Spring-Cloud-Alibaba%E4%BB%8B%E7%BB%8D%E5%8F%8A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"><span class="level-item">Spring Cloud Alibaba介绍及环境搭建</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#什么是Nacos"><span class="level-left"><span class="level-item">1</span><span class="level-item">什么是Nacos</span></span></a></li><li><a class="level is-mobile" href="#安装Nacos"><span class="level-left"><span class="level-item">2</span><span class="level-item">安装Nacos</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#准备环境"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">准备环境</span></span></a></li><li><a class="level is-mobile" href="#下载Nacos（1-4-0）"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">下载Nacos（1.4.0）</span></span></a></li><li><a class="level is-mobile" href="#解压缩安装包到指定位置"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">解压缩安装包到指定位置</span></span></a></li><li><a class="level is-mobile" href="#启动安装服务"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">启动安装服务</span></span></a></li><li><a class="level is-mobile" href="#访问nacos的web服务管理界面"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">访问nacos的web服务管理界面</span></span></a></li></ul></li><li><a class="level is-mobile" href="#开发服务注册到Nacos"><span class="level-left"><span class="level-item">3</span><span class="level-item">开发服务注册到Nacos</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#创建项目并引入依赖"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">创建项目并引入依赖</span></span></a></li><li><a class="level is-mobile" href="#修改配置文件"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">修改配置文件</span></span></a></li><li><a class="level is-mobile" href="#入口类加入服务注册注解"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">入口类加入服务注册注解</span></span></a></li><li><a class="level is-mobile" href="#启动项目并查看nacos控制台"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">启动项目并查看nacos控制台</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Nacos配合OpenFeign进行服务间调用"><span class="level-left"><span class="level-item">4</span><span class="level-item">Nacos配合OpenFeign进行服务间调用</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#通过restTemplate直接调用"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">通过restTemplate直接调用</span></span></a></li><li><a class="level is-mobile" href="#DiscoveryClient-restTemplate-ribbon负载均衡客户端"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">DiscoveryClient (restTemplate + ribbon负载均衡客户端)</span></span></a></li><li><a class="level is-mobile" href="#LoadBalancerClient-restTemplate-ribbon负载均衡客户端"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">LoadBalancerClient (restTemplate + ribbon负载均衡客户端)</span></span></a></li><li><a class="level is-mobile" href="#LoadBalanced注解形式-restTemplate-ribbon负载均衡客户端"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">LoadBalanced注解形式(restTemplate + ribbon负载均衡客户端)</span></span></a></li><li><a class="level is-mobile" href="#openfeign调用（底层用ribbon做负载均衡）–推荐"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">openfeign调用（底层用ribbon做负载均衡）–推荐</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Nacos作为配置中心使用"><span class="level-left"><span class="level-item">5</span><span class="level-item">Nacos作为配置中心使用</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#创建项目并引入依赖-1"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">创建项目并引入依赖</span></span></a></li><li><a class="level is-mobile" href="#修改配置文件-1"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">修改配置文件</span></span></a></li><li><a class="level is-mobile" href="#在nacos中创建配置"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">在nacos中创建配置</span></span></a></li><li><a class="level is-mobile" href="#编写控制器测试配置读取情况"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">编写控制器测试配置读取情况</span></span></a></li><li><a class="level is-mobile" href="#启动项目测试配置读取"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">启动项目测试配置读取</span></span></a></li><li><a class="level is-mobile" href="#DataId"><span class="level-left"><span class="level-item">5.6</span><span class="level-item">DataId</span></span></a></li><li><a class="level is-mobile" href="#实现自动配置刷新"><span class="level-left"><span class="level-item">5.7</span><span class="level-item">实现自动配置刷新</span></span></a></li></ul></li><li><a class="level is-mobile" href="#命名空间"><span class="level-left"><span class="level-item">6</span><span class="level-item">命名空间</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#命名空间介绍（namespace）"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">命名空间介绍（namespace）</span></span></a></li><li><a class="level is-mobile" href="#创建其他命名空间"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">创建其他命名空间</span></span></a></li><li><a class="level is-mobile" href="#在配置列表查看命名空间"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">在配置列表查看命名空间</span></span></a></li><li><a class="level is-mobile" href="#在指定空间下创建配置文件"><span class="level-left"><span class="level-item">6.4</span><span class="level-item">在指定空间下创建配置文件</span></span></a></li><li><a class="level is-mobile" href="#在项目中使用命名空间指定配置"><span class="level-left"><span class="level-item">6.5</span><span class="level-item">在项目中使用命名空间指定配置</span></span></a></li><li><a class="level is-mobile" href="#启动项目测试配置"><span class="level-left"><span class="level-item">6.6</span><span class="level-item">启动项目测试配置</span></span></a></li></ul></li><li><a class="level is-mobile" href="#配置分组"><span class="level-left"><span class="level-item">7</span><span class="level-item">配置分组</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#分组介绍（GROUP）"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">分组介绍（GROUP）</span></span></a></li><li><a class="level is-mobile" href="#创建分组"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">创建分组</span></span></a></li><li><a class="level is-mobile" href="#项目读取指定分组的配置"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">项目读取指定分组的配置</span></span></a></li><li><a class="level is-mobile" href="#启动项目测试配置-1"><span class="level-left"><span class="level-item">7.4</span><span class="level-item">启动项目测试配置</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/common/favicon.ico" alt="技术分享主页" height="28"></a><p class="is-size-7"><span>&copy; 2025 bufx</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><span>  <img src="/img/common/foot-ga.png">  <a title="苏公网安备 32059002005248" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32032102000187" target="_blank" rel="noopener">苏公网安备 32059002005248</a></span><span>  <img src="/img/common/foot-icp.png">  <a title="苏ICP备2021016911号-2" href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">苏ICP备2021016911号-2</a></span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>