<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Hystrix组件使用 - 技术分享主页</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="技术分享主页"><meta name="msapplication-TileImage" content="/img/common/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="技术分享主页"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="In a distributed environment, inevitably some of the many service dependencies will fail. Hystrix is a library that helps you control the interactions between these distributed services by adding lat"><meta property="og:type" content="blog"><meta property="og:title" content="Hystrix组件使用"><meta property="og:url" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/"><meta property="og:site_name" content="技术分享主页"><meta property="og:description" content="In a distributed environment, inevitably some of the many service dependencies will fail. Hystrix is a library that helps you control the interactions between these distributed services by adding lat"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/5IVXrO1605800427458.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/ABYBPI1605800584728.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/QWeXxx1605800603487.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/rYHAck1605800694562.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/dB5MWr1605800748433.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/0t007J1605836576505.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/TyWSCc1605836603280.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Dprz8G1605836762944.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/pOSRw31605838914178.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Y8bGic1605838951208.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/mvizQV1605847628452.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/H1NeQb1605848274087.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/yATAFR1605849480181.png"><meta property="og:image" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Xr2AV21605849557909.png"><meta property="article:published_time" content="2020-11-19T15:40:04.000Z"><meta property="article:modified_time" content="2025-07-11T13:30:51.197Z"><meta property="article:author" content="bufx"><meta property="article:tag" content="微服务"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/5IVXrO1605800427458.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/"},"headline":"Hystrix组件使用","image":["https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/5IVXrO1605800427458.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/ABYBPI1605800584728.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/QWeXxx1605800603487.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/rYHAck1605800694562.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/dB5MWr1605800748433.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/0t007J1605836576505.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/TyWSCc1605836603280.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Dprz8G1605836762944.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/pOSRw31605838914178.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Y8bGic1605838951208.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/mvizQV1605847628452.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/H1NeQb1605848274087.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/yATAFR1605849480181.png","https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Xr2AV21605849557909.png"],"datePublished":"2020-11-19T15:40:04.000Z","dateModified":"2025-07-11T13:30:51.197Z","author":{"@type":"Person","name":"bufx"},"publisher":{"@type":"Organization","name":"技术分享主页","logo":{"@type":"ImageObject","url":"https://blog.bufx.com/img/common/favicon.ico"}},"description":"In a distributed environment, inevitably some of the many service dependencies will fail. Hystrix is a library that helps you control the interactions between these distributed services by adding lat"}</script><link rel="canonical" href="https://blog.bufx.com/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/"><link rel="icon" href="/img/common/favicon.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link data-pjax rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?3c3ec636275df73c9383cb68964ee62a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/common/favicon.ico" alt="技术分享主页" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-11-19T15:40:04.000Z" title="2020/11/19 23:40:04">2020-11-19</time>发表</span><span class="level-item"><time dateTime="2025-07-11T13:30:51.197Z" title="2025/7/11 21:30:51">2025-07-11</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/SpringCloud/">SpringCloud</a></span><span class="level-item">20 分钟读完 (大约2986个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Hystrix组件使用</h1><div class="content"><p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/5IVXrO1605800427458.png"></p>
<p>In a distributed environment, inevitably some of the many service dependencies will fail. Hystrix is a library that helps you control the interactions between these distributed services by adding latency tolerance and fault tolerance logic. Hystrix does this by isolating points of access between the services, stopping cascading failures across them, and providing fallback options, all of which improve your system’s overall resiliency.														–[摘自官方]</p>
<span id="more"></span>

<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>官方：<a target="_blank" rel="noopener" href="https://github.com/Netflix/Hystrix">https://github.com/Netflix/Hystrix</a></p>
<p><strong>翻译</strong>: 在分布式环境中，许多服务依赖项不可避免地会失败。Hystrix是一个库，它通过添加延迟容忍和容错逻辑来帮助您控制这些分布式服务之间的交互。Hystrix通过隔离服务之间的访问点、停止它们之间的级联故障以及提供后备选项来实现这一点，所有这些都可以提高系统的整体弹性。</p>
<p><strong>通俗定义</strong>: Hystrix是一个用于处理分布式系统的延迟和容错的开源库，在分布式系统中，许多依赖不可避免的会调用失败，超时、异常等，Hystrix能够保证在一个依赖出问题的情况下，不会导致整体服务失败，避免级联故障(服务雪崩现象)，提高分布式系统的弹性。</p>
<h2 id="服务雪崩"><a href="#服务雪崩" class="headerlink" title="服务雪崩"></a>服务雪崩</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>在微服务之间进行服务调用是由于某一个服务故障，导致级联服务故障的现象，称为雪崩效应。雪崩效应描述的是提供方不可用，导致消费方不可用并将不可用逐渐放大的过程。</p>
<h3 id="图解雪崩效应"><a href="#图解雪崩效应" class="headerlink" title="图解雪崩效应"></a>图解雪崩效应</h3><p>如存在如下图调用链路：</p>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/ABYBPI1605800584728.png"></p>
<p>而此时，Service A的流量波动很大，流量经常会突然性增加！那么在这种情况下，就算Service A能扛得住请求，Service B和Service C未必能扛得住这突发的请求。此时，如果Service C因为抗不住请求，变得不可用。那么Service B的请求也会阻塞，慢慢耗尽Service B的线程资源，Service B就会变得不可用。紧接着，Service A也会不可用，这一过程如下图所示</p>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/QWeXxx1605800603487.png"></p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><h3 id="服务熔断"><a href="#服务熔断" class="headerlink" title="服务熔断"></a>服务熔断</h3><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p>“熔断器”本身是一种开关装置，当某个服务单元发生故障之后，通过断路器的故障监控，某个异常条件被触发，直接熔断整个服务。向调用方法返回一个符合预期的、可处理的备选响应(FallBack),而不是长时间的等待或者抛出调用方法无法处理的异常，就保证了服务调用方的线程不会被长时间占用，避免故障在分布式系统中蔓延，乃至雪崩。如果目标服务情况好转则恢复调用。服务熔断是解决服务雪崩的重要手段。</p>
<h4 id="服务熔断图示"><a href="#服务熔断图示" class="headerlink" title="服务熔断图示"></a>服务熔断图示</h4><p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/rYHAck1605800694562.png"></p>
<h3 id="服务降级"><a href="#服务降级" class="headerlink" title="服务降级"></a>服务降级</h3><h4 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h4><p>服务压力剧增的时候根据当前的业务情况及流量对一些服务和页面有策略的降级，以此缓解服务器的压力，以保证核心任务的进行。同时保证部分甚至大部分任务客户能得到正确的相应。也就是当前的请求处理不了了或者出错了，给一个默认的返回。</p>
<p><strong>通俗</strong>: 关闭系统中边缘服务 保证系统核心服务的正常运行  称之为服务降级</p>
<h4 id="服务降级图示"><a href="#服务降级图示" class="headerlink" title="服务降级图示"></a>服务降级图示</h4><p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/dB5MWr1605800748433.png"></p>
<h3 id="熔断和降级总结"><a href="#熔断和降级总结" class="headerlink" title="熔断和降级总结"></a>熔断和降级总结</h3><h4 id="共同点"><a href="#共同点" class="headerlink" title="共同点"></a>共同点</h4><ul>
<li>目的很一致，都是从可用性可靠性着想，为防止系统的整体缓慢甚至崩溃，采用的技术手段；</li>
<li>最终表现类似，对于两者来说，最终让用户体验到的是某些功能暂时不可达或不可用；</li>
<li>粒度一般都是服务级别，当然，业界也有不少更细粒度的做法，比如做到数据持久层（允许查询，不允许增删改）；</li>
<li>自治性要求很高，熔断模式一般都是服务基于策略的自动触发，降级虽说可人工干预，但在微服务架构下，完全靠人显然不可能，开关预置、配置中心都是必要手段；</li>
</ul>
<h4 id="异同点"><a href="#异同点" class="headerlink" title="异同点"></a>异同点</h4><ul>
<li>触发原因不太一样，服务熔断一般是某个服务（下游服务）故障引起，而服务降级一般是从整体负荷考虑；</li>
<li>管理目标的层次不太一样，熔断其实是一个框架级的处理，每个微服务都需要（无层级之分），而降级一般需要对业务有层级之分（比如降级一般是从最外围服务开始）</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li>熔断必会触发降级,所以熔断也是降级一种,区别在于熔断是对调用链路的保护,而降级是对系统过载的一种保护处理</li>
</ul>
<h2 id="服务熔断的实现（在服务提供者实现）"><a href="#服务熔断的实现（在服务提供者实现）" class="headerlink" title="服务熔断的实现（在服务提供者实现）"></a>服务熔断的实现（在服务提供者实现）</h2><h3 id="项目中引入hystrix依赖"><a href="#项目中引入hystrix依赖" class="headerlink" title="项目中引入hystrix依赖"></a>项目中引入hystrix依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入hystrix依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改启动类开启断路器"><a href="#修改启动类开启断路器" class="headerlink" title="修改启动类开启断路器"></a>修改启动类开启断路器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span> <span class="comment">//用来开启断路器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springcloud05Products9998Application</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		SpringApplication.run(Springcloud05Products9998Application.class, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用HystrixCommand注解实现断路"><a href="#使用HystrixCommand注解实现断路" class="headerlink" title="使用HystrixCommand注解实现断路"></a>使用HystrixCommand注解实现断路</h3><p>在服务提供者的业务类中添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//模拟熔断器</span></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/product/break&quot;)</span></span><br><span class="line">	<span class="meta">@HystrixCommand(fallbackMethod = &quot;testBreakFall&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testBreak</span><span class="params">(Integer productId)</span> &#123;</span><br><span class="line">		log.info(<span class="string">&quot;接收的商品productId为：[&#123;&#125;]&quot;</span>, productId);</span><br><span class="line">		<span class="keyword">if</span> (productId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;数据不合法&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;当前接收商品productId为：&quot;</span>+ productId;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testBreakFall</span><span class="params">(Integer productId)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;当前数据不合法: &quot;</span>+productId;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h3><ul>
<li>正常参数访问</li>
</ul>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/0t007J1605836576505.png"></p>
<ul>
<li>错误参数访问</li>
</ul>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/TyWSCc1605836603280.png"></p>
<h3 id="断路器打开条件"><a href="#断路器打开条件" class="headerlink" title="断路器打开条件"></a>断路器打开条件</h3><p>从上面演示过程中会发现如果触发一定条件断路器会自动打开,过了一点时间正常之后又会关闭。那么断路器打开条件是什么呢？</p>
<p>官方：<a target="_blank" rel="noopener" href="https://cloud.spring.io/spring-cloud-netflix/2.2.x/reference/html/#circuit-breaker-spring-cloud-circuit-breaker-with-hystrix">https://cloud.spring.io/spring-cloud-netflix/2.2.x/reference/html/#circuit-breaker-spring-cloud-circuit-breaker-with-hystrix</a></p>
<p>A service failure in the lower level of services can cause cascading failure all the way up to the user. When calls to a particular service exceed <code>circuitBreaker.requestVolumeThreshold</code> (default: 20 requests) and the failure percentage is greater than <code>circuitBreaker.errorThresholdPercentage</code> (default: &gt;50%) in a rolling window defined by <code>metrics.rollingStats.timeInMilliseconds</code> (default: 10 seconds), the circuit opens and the call is not made. In cases of error and an open circuit, a fallback can be provided by the developer.																		–摘自官方</p>
<p>原文翻译之后,总结<code>打开关闭的条件</code>:</p>
<ol>
<li><p>当满足一定的阀值的时候（默认10秒内超过20个请求次数）</p>
</li>
<li><p>当失败率达到一定的时候（默认10秒内超过50%的请求失败）</p>
</li>
<li><p>到达以上阀值，断路器将会开启</p>
</li>
<li><p>当开启的时候，所有请求都不会进行转发</p>
</li>
<li><p>一段时间之后（默认是5秒），这个时候断路器是半开状态，会让其中一个请求进行转发。如果成功，断路器会关闭，若失败，继续开启。重复4和5。</p>
</li>
</ol>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Dprz8G1605836762944.png"></p>
<h3 id="默认的服务FallBack处理方法"><a href="#默认的服务FallBack处理方法" class="headerlink" title="默认的服务FallBack处理方法"></a>默认的服务FallBack处理方法</h3><p>如果为每一个服务方法开发一个降级,对于我们来说,可能会出现大量的代码的冗余,不利于维护,这个时候就需要加入默认服务降级处理方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//模拟熔断器</span></span><br><span class="line">	<span class="meta">@GetMapping(&quot;/product/break&quot;)</span></span><br><span class="line">	<span class="comment">//@HystrixCommand(fallbackMethod = &quot;testBreakFall&quot;)</span></span><br><span class="line">	<span class="meta">@HystrixCommand(defaultFallback = &quot;defaultBreakFall&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testBreak</span><span class="params">(Integer productId)</span> &#123;</span><br><span class="line">		log.info(<span class="string">&quot;接收的商品productId为：[&#123;&#125;]&quot;</span>, productId);</span><br><span class="line">		<span class="keyword">if</span> (productId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;数据不合法&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;当前接收商品productId为：&quot;</span>+ productId;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">defaultBreakFall</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;当前服务已被熔断，暂时不可用！&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="服务降级的实现（在服务消费者实现）"><a href="#服务降级的实现（在服务消费者实现）" class="headerlink" title="服务降级的实现（在服务消费者实现）"></a>服务降级的实现（在服务消费者实现）</h2><h3 id="引入hystrix依赖"><a href="#引入hystrix依赖" class="headerlink" title="引入hystrix依赖"></a>引入hystrix依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入hystrix依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置文件开启feign支持hystrix"><a href="#配置文件开启feign支持hystrix" class="headerlink" title="配置文件开启feign支持hystrix"></a>配置文件开启feign支持hystrix</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#开启feign支持hystrix</span></span><br><span class="line"><span class="attr">feign.hystrix.enabled</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<h3 id="开发fallback处理类"><a href="#开发fallback处理类" class="headerlink" title="开发fallback处理类"></a>开发fallback处理类</h3><p>必须要实现OpenFeign客户端接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductClientFallBack</span> <span class="keyword">implements</span> <span class="title class_">ProductClient</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testBreak</span><span class="params">(Integer productId)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;当前根据查询所有不可用，服务已被降级！&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="在OpenFeign客户端中加入Hystrix"><a href="#在OpenFeign客户端中加入Hystrix" class="headerlink" title="在OpenFeign客户端中加入Hystrix"></a>在OpenFeign客户端中加入Hystrix</h3><p><code>fallback = ProductClientFallBack.class</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> buubiu</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="comment">//用来标识当前接口是一个 feign 组件</span></span><br><span class="line"><span class="comment">//value:书写调用服务serviceId(服务名称)</span></span><br><span class="line"><span class="comment">//fallback:用来指定服务降级的客户端实现类</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;products&quot;,fallback = ProductClientFallBack.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductClient</span> &#123;</span><br><span class="line">	<span class="meta">@GetMapping(&quot;/product/break&quot;)</span></span><br><span class="line">	String <span class="title function_">testBreak</span><span class="params">(Integer productId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="访问测试-1"><a href="#访问测试-1" class="headerlink" title="访问测试"></a>访问测试</h3><ul>
<li>正常参数访问</li>
</ul>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/pOSRw31605838914178.png"></p>
<ul>
<li>错误参数访问</li>
</ul>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Y8bGic1605838951208.png"></p>
<p><code>注意：</code></p>
<p><code>1. 如果服务端熔断和客户端降级同时开启,要求服务端熔断方法的返回值必须与客户端方法降级的返回值一致!!</code></p>
<p><code>2. 如果服务端熔断和客户端降级同时开启,熔断的优先级高于降级的优先级，所以上面错误返回的数据是服务熔断的!!</code></p>
<h2 id="Hystrix-Dashboard使用"><a href="#Hystrix-Dashboard使用" class="headerlink" title="Hystrix Dashboard使用"></a>Hystrix Dashboard使用</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>Hystrix Dashboard的一个主要优点是它收集了关于每个HystrixCommand的一组度量。Hystrix仪表板以高效的方式显示每个断路器的运行状况。</p>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/mvizQV1605847628452.png"></p>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><h4 id="新建项目引入hystrix-dashboard-依赖"><a href="#新建项目引入hystrix-dashboard-依赖" class="headerlink" title="新建项目引入hystrix dashboard 依赖"></a>新建项目引入hystrix dashboard 依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入 hystrix dashboard 依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="入口类中开启hystrix-dashboard"><a href="#入口类中开启hystrix-dashboard" class="headerlink" title="入口类中开启hystrix dashboard"></a>入口类中开启hystrix dashboard</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableHystrixDashboard</span> <span class="comment">//开启监控面板</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springcloud07Hystrixdashboard9990Application</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		SpringApplication.run(Springcloud07Hystrixdashboard9990Application.class, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="启动hystrix-dashboard-应用，并访问"><a href="#启动hystrix-dashboard-应用，并访问" class="headerlink" title="启动hystrix dashboard 应用，并访问"></a>启动hystrix dashboard 应用，并访问</h4><p><a target="_blank" rel="noopener" href="http://localhost:9990/hystrix">http://localhost:9990/hystrix</a></p>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/H1NeQb1605848274087.png"></p>
<h4 id="修改仪表盘项目的配置文件"><a href="#修改仪表盘项目的配置文件" class="headerlink" title="修改仪表盘项目的配置文件"></a>修改仪表盘项目的配置文件</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#允许监控的白名单，这里代表全部监控</span></span><br><span class="line"><span class="attr">hystrix.dashboard.proxy-stream-allow-list</span>=<span class="string">*</span></span><br></pre></td></tr></table></figure>

<h4 id="修改被监控项目的配置文件"><a href="#修改被监控项目的配置文件" class="headerlink" title="修改被监控项目的配置文件"></a>修改被监控项目的配置文件</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#熔断监控配置</span></span><br><span class="line"><span class="attr">management.endpoints.web.exposure.include</span>=<span class="string">*</span></span><br></pre></td></tr></table></figure>

<h4 id="通过监控界面监控"><a href="#通过监控界面监控" class="headerlink" title="通过监控界面监控"></a>通过监控界面监控</h4><ul>
<li>填写监控路径：<a target="_blank" rel="noopener" href="http://localhost:9998/actuator/hystrix.stream">http://localhost:9998/actuator/hystrix.stream</a></li>
</ul>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/yATAFR1605849480181.png"></p>
<ul>
<li><p>点击 Monitor Stream 查看控制台</p>
<p>当发起服务调用时，控制台就会显示结果：</p>
</li>
</ul>
<p><img src="/Hystrix%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/Xr2AV21605849557909.png"></p>
<h2 id="Hystrix-和-Hystrix-Dashboard停止维护"><a href="#Hystrix-和-Hystrix-Dashboard停止维护" class="headerlink" title="Hystrix 和 Hystrix Dashboard停止维护"></a>Hystrix 和 Hystrix Dashboard停止维护</h2><p>官方：<a target="_blank" rel="noopener" href="https://github.com/Netflix/Hystrix">https://github.com/Netflix/Hystrix</a></p>
<p>Hystrix is no longer in active development, and is currently in maintenance mode.</p>
<p>Hystrix (at version 1.5.18) is stable enough to meet the needs of Netflix for our existing applications. Meanwhile, our focus has shifted towards more adaptive implementations that react to an application’s real time performance rather than pre-configured settings (for example, through <a target="_blank" rel="noopener" href="https://medium.com/@NetflixTechBlog/performance-under-load-3e6fa9a60581">adaptive concurrency limits</a>). For the cases where something like Hystrix makes sense, we intend to continue using Hystrix for existing applications, and to leverage open and active projects like <a target="_blank" rel="noopener" href="https://github.com/resilience4j/resilience4j">resilience4j</a> for new internal projects. We are beginning to recommend others do the same.            –[官方说明]</p>
<p>**翻译:**Hystrix（版本1.5.18）足够稳定，可以满足Netflix对我们现有应用的需求。同时，我们的重点已经转移到对应用程序的实时性能作出反应的更具适应性的实现，而不是预先配置的设置（例如，通过自适应并发限制）。对于像Hystrix这样的东西有意义的情况，我们打算继续在现有的应用程序中使用Hystrix，并在新的内部项目中利用诸如resilience4j这样的开放和活跃的项目。我们开始建议其他人也这样做。</p>
<p>The hystrix-dashboard component of this project has been deprecated and moved to <a target="_blank" rel="noopener" href="https://github.com/Netflix-Skunkworks/hystrix-dashboard">Netflix-Skunkworks&#x2F;hystrix-dashboard</a>. Please see the README there for more details including important security considerations.                                             —[官方说明]</p>
<p><strong>翻译：</strong>该项目的hystrix-dashboard组件已被弃用，并移至Netflix-Skunkworks &#x2F; hystrix-dashboard。请参阅自述文件以获取更多详细信息，包括重要的安全注意事项。</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Hystrix组件使用</p><p><a href="https://blog.bufx.com/Hystrix组件使用/">https://blog.bufx.com/Hystrix组件使用/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>bufx</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-11-19</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-07-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">服务网关组件的使用</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/OpenFeign%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"><span class="level-item">OpenFeign组件的使用</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#介绍"><span class="level-left"><span class="level-item">1</span><span class="level-item">介绍</span></span></a></li><li><a class="level is-mobile" href="#服务雪崩"><span class="level-left"><span class="level-item">2</span><span class="level-item">服务雪崩</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#定义"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">定义</span></span></a></li><li><a class="level is-mobile" href="#图解雪崩效应"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">图解雪崩效应</span></span></a></li></ul></li><li><a class="level is-mobile" href="#解决方法"><span class="level-left"><span class="level-item">3</span><span class="level-item">解决方法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#服务熔断"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">服务熔断</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#定义-1"><span class="level-left"><span class="level-item">3.1.1</span><span class="level-item">定义</span></span></a></li><li><a class="level is-mobile" href="#服务熔断图示"><span class="level-left"><span class="level-item">3.1.2</span><span class="level-item">服务熔断图示</span></span></a></li></ul></li><li><a class="level is-mobile" href="#服务降级"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">服务降级</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#定义-2"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">定义</span></span></a></li><li><a class="level is-mobile" href="#服务降级图示"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item">服务降级图示</span></span></a></li></ul></li><li><a class="level is-mobile" href="#熔断和降级总结"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">熔断和降级总结</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#共同点"><span class="level-left"><span class="level-item">3.3.1</span><span class="level-item">共同点</span></span></a></li><li><a class="level is-mobile" href="#异同点"><span class="level-left"><span class="level-item">3.3.2</span><span class="level-item">异同点</span></span></a></li><li><a class="level is-mobile" href="#总结"><span class="level-left"><span class="level-item">3.3.3</span><span class="level-item">总结</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#服务熔断的实现（在服务提供者实现）"><span class="level-left"><span class="level-item">4</span><span class="level-item">服务熔断的实现（在服务提供者实现）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#项目中引入hystrix依赖"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">项目中引入hystrix依赖</span></span></a></li><li><a class="level is-mobile" href="#修改启动类开启断路器"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">修改启动类开启断路器</span></span></a></li><li><a class="level is-mobile" href="#使用HystrixCommand注解实现断路"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">使用HystrixCommand注解实现断路</span></span></a></li><li><a class="level is-mobile" href="#访问测试"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">访问测试</span></span></a></li><li><a class="level is-mobile" href="#断路器打开条件"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">断路器打开条件</span></span></a></li><li><a class="level is-mobile" href="#默认的服务FallBack处理方法"><span class="level-left"><span class="level-item">4.6</span><span class="level-item">默认的服务FallBack处理方法</span></span></a></li></ul></li><li><a class="level is-mobile" href="#服务降级的实现（在服务消费者实现）"><span class="level-left"><span class="level-item">5</span><span class="level-item">服务降级的实现（在服务消费者实现）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#引入hystrix依赖"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">引入hystrix依赖</span></span></a></li><li><a class="level is-mobile" href="#配置文件开启feign支持hystrix"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">配置文件开启feign支持hystrix</span></span></a></li><li><a class="level is-mobile" href="#开发fallback处理类"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">开发fallback处理类</span></span></a></li><li><a class="level is-mobile" href="#在OpenFeign客户端中加入Hystrix"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">在OpenFeign客户端中加入Hystrix</span></span></a></li><li><a class="level is-mobile" href="#访问测试-1"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">访问测试</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Hystrix-Dashboard使用"><span class="level-left"><span class="level-item">6</span><span class="level-item">Hystrix Dashboard使用</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#介绍-1"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">介绍</span></span></a></li><li><a class="level is-mobile" href="#使用方法"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">使用方法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#新建项目引入hystrix-dashboard-依赖"><span class="level-left"><span class="level-item">6.2.1</span><span class="level-item">新建项目引入hystrix dashboard 依赖</span></span></a></li><li><a class="level is-mobile" href="#入口类中开启hystrix-dashboard"><span class="level-left"><span class="level-item">6.2.2</span><span class="level-item">入口类中开启hystrix dashboard</span></span></a></li><li><a class="level is-mobile" href="#启动hystrix-dashboard-应用，并访问"><span class="level-left"><span class="level-item">6.2.3</span><span class="level-item">启动hystrix dashboard 应用，并访问</span></span></a></li><li><a class="level is-mobile" href="#修改仪表盘项目的配置文件"><span class="level-left"><span class="level-item">6.2.4</span><span class="level-item">修改仪表盘项目的配置文件</span></span></a></li><li><a class="level is-mobile" href="#修改被监控项目的配置文件"><span class="level-left"><span class="level-item">6.2.5</span><span class="level-item">修改被监控项目的配置文件</span></span></a></li><li><a class="level is-mobile" href="#通过监控界面监控"><span class="level-left"><span class="level-item">6.2.6</span><span class="level-item">通过监控界面监控</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#Hystrix-和-Hystrix-Dashboard停止维护"><span class="level-left"><span class="level-item">7</span><span class="level-item">Hystrix 和 Hystrix Dashboard停止维护</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/common/favicon.ico" alt="技术分享主页" height="28"></a><p class="is-size-7"><span>&copy; 2025 bufx</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><span>  <img src="/img/common/foot-ga.png">  <a title="苏公网安备 32059002005248" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32032102000187" target="_blank" rel="noopener">苏公网安备 32059002005248</a></span><span>  <img src="/img/common/foot-icp.png">  <a title="苏ICP备2021016911号-2" href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">苏ICP备2021016911号-2</a></span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bufx"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>